/*
 TweenJS
 Visit http://createjs.com/ for documentation, updates and examples.

 Copyright (c) 2010 gskinner.com, inc.

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
this.createjs=this.createjs||{};createjs.extend=function(a,e){function b(){this.constructor=a}b.prototype=e.prototype;return a.prototype=new b};this.createjs=this.createjs||{};createjs.promote=function(a,e){var b=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(b)||b.__proto__;if(d){b[(e+="_")+"constructor"]=d.constructor;for(var c in d)b.hasOwnProperty(c)&&"function"==typeof d[c]&&(b[e+c]=d[c])}return a};this.createjs=this.createjs||{};
createjs.deprecate=function(a,e){return function(){var b="Deprecated property or method '"+e+"'. See docs for info.";console&&(console.warn?console.warn(b):console.log(b));return a&&a.apply(this,arguments)}};this.createjs=this.createjs||{};
(function(){function a(b,d,c){this.type=b;this.currentTarget=this.target=null;this.eventPhase=0;this.bubbles=!!d;this.cancelable=!!c;this.timeStamp=(new Date).getTime();this.removed=this.immediatePropagationStopped=this.propagationStopped=this.defaultPrevented=!1}var e=a.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0};e.stopPropagation=function(){this.propagationStopped=!0};e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=
!0};e.remove=function(){this.removed=!0};e.clone=function(){return new a(this.type,this.bubbles,this.cancelable)};e.set=function(b){for(var d in b)this[d]=b[d];return this};e.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=a})();this.createjs=this.createjs||{};
(function(){function a(){this._captureListeners=this._listeners=null}var e=a.prototype;a.initialize=function(b){b.addEventListener=e.addEventListener;b.on=e.on;b.removeEventListener=b.off=e.removeEventListener;b.removeAllEventListeners=e.removeAllEventListeners;b.hasEventListener=e.hasEventListener;b.dispatchEvent=e.dispatchEvent;b._dispatchEvent=e._dispatchEvent;b.willTrigger=e.willTrigger};e.addEventListener=function(b,d,c){var f=c?this._captureListeners=this._captureListeners||{}:this._listeners=
this._listeners||{};var h=f[b];h&&this.removeEventListener(b,d,c);(h=f[b])?h.push(d):f[b]=[d];return d};e.on=function(b,d,c,f,h,k){d.handleEvent&&(c=c||d,d=d.handleEvent);c=c||this;return this.addEventListener(b,function(m){d.call(c,m,h);f&&m.remove()},k)};e.removeEventListener=function(b,d,c){if(c=c?this._captureListeners:this._listeners){var f=c[b];if(f)for(var h=0,k=f.length;h<k;h++)if(f[h]==d){1==k?delete c[b]:f.splice(h,1);break}}};e.off=e.removeEventListener;e.removeAllEventListeners=function(b){b?
(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null};e.dispatchEvent=function(b,d,c){if("string"==typeof b){var f=this._listeners;if(!(d||f&&f[b]))return!0;b=new createjs.Event(b,d,c)}else b.target&&b.clone&&(b=b.clone());try{b.target=this}catch(h){}if(b.bubbles&&this.parent){c=this;for(d=[c];c.parent;)d.push(c=c.parent);f=d.length;for(c=f-1;0<=c&&!b.propagationStopped;c--)d[c]._dispatchEvent(b,1+(0==c));
for(c=1;c<f&&!b.propagationStopped;c++)d[c]._dispatchEvent(b,3)}else this._dispatchEvent(b,2);return!b.defaultPrevented};e.hasEventListener=function(b){var d=this._listeners,c=this._captureListeners;return!!(d&&d[b]||c&&c[b])};e.willTrigger=function(b){for(var d=this;d;){if(d.hasEventListener(b))return!0;d=d.parent}return!1};e.toString=function(){return"[EventDispatcher]"};e._dispatchEvent=function(b,d){var c,f,h=2>=d?this._captureListeners:this._listeners;if(b&&h&&(f=h[b.type])&&(c=f.length)){try{b.currentTarget=
this}catch(m){}try{b.eventPhase=d|0}catch(m){}b.removed=!1;f=f.slice();for(h=0;h<c&&!b.immediatePropagationStopped;h++){var k=f[h];k.handleEvent?k.handleEvent(b):k(b);b.removed&&(this.off(b.type,k,1==d),b.removed=!1)}}2===d&&this._dispatchEvent(b,2.1)};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ticker cannot be instantiated.";}a.RAF_SYNCHED="synched";a.RAF="raf";a.TIMEOUT="timeout";a.timingMode=null;a.maxDelta=0;a.paused=!1;a.removeEventListener=null;a.removeAllEventListeners=null;a.dispatchEvent=null;a.hasEventListener=null;a._listeners=null;createjs.EventDispatcher.initialize(a);a._addEventListener=a.addEventListener;a.addEventListener=function(){!a._inited&&a.init();return a._addEventListener.apply(a,arguments)};a._inited=!1;a._startTime=0;a._pausedTime=
0;a._ticks=0;a._pausedTicks=0;a._interval=50;a._lastTime=0;a._times=null;a._tickTimes=null;a._timerId=null;a._raf=!0;a._setInterval=function(d){a._interval=d;a._inited&&a._setupTick()};a.setInterval=createjs.deprecate(a._setInterval,"Ticker.setInterval");a._getInterval=function(){return a._interval};a.getInterval=createjs.deprecate(a._getInterval,"Ticker.getInterval");a._setFPS=function(d){a._setInterval(1E3/d)};a.setFPS=createjs.deprecate(a._setFPS,"Ticker.setFPS");a._getFPS=function(){return 1E3/
a._interval};a.getFPS=createjs.deprecate(a._getFPS,"Ticker.getFPS");try{Object.defineProperties(a,{interval:{get:a._getInterval,set:a._setInterval},framerate:{get:a._getFPS,set:a._setFPS}})}catch(d){console.log(d)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)};a.reset=function(){if(a._raf){var d=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||
window.msCancelAnimationFrame;d&&d(a._timerId)}else clearTimeout(a._timerId);a.removeAllEventListeners("tick");a._timerId=a._times=a._tickTimes=null;a._startTime=a._lastTime=a._ticks=a._pausedTime=0;a._inited=!1};a.getMeasuredTickTime=function(d){var c=0,f=a._tickTimes;if(!f||1>f.length)return-1;d=Math.min(f.length,d||a._getFPS()|0);for(var h=0;h<d;h++)c+=f[h];return c/d};a.getMeasuredFPS=function(d){var c=a._times;if(!c||2>c.length)return-1;d=Math.min(c.length-1,d||a._getFPS()|0);return 1E3/((c[0]-
c[d])/d)};a.getTime=function(d){return a._startTime?a._getTime()-(d?a._pausedTime:0):-1};a.getEventTime=function(d){return a._startTime?(a._lastTime||a._startTime)-(d?a._pausedTime:0):-1};a.getTicks=function(d){return a._ticks-(d?a._pausedTicks:0)};a._handleSynch=function(){a._timerId=null;a._setupTick();a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()};a._handleRAF=function(){a._timerId=null;a._setupTick();a._tick()};a._handleTimeout=function(){a._timerId=null;a._setupTick();a._tick()};a._setupTick=
function(){if(null==a._timerId){var d=a.timingMode;if(d==a.RAF_SYNCHED||d==a.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c){a._timerId=c(d==a.RAF?a._handleRAF:a._handleSynch);a._raf=!0;return}}a._raf=!1;a._timerId=setTimeout(a._handleTimeout,a._interval)}};a._tick=function(){var d=a.paused,c=a._getTime(),f=c-a._lastTime;a._lastTime=c;a._ticks++;d&&(a._pausedTicks++,a._pausedTime+=
f);if(a.hasEventListener("tick")){var h=new createjs.Event("tick"),k=a.maxDelta;h.delta=k&&f>k?k:f;h.paused=d;h.time=c;h.runTime=c-a._pausedTime;a.dispatchEvent(h)}for(a._tickTimes.unshift(a._getTime()-c);100<a._tickTimes.length;)a._tickTimes.pop();for(a._times.unshift(c);100<a._times.length;)a._times.pop()};var e=window,b=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow;a._getTime=function(){return(b&&b.call(e.performance)||(new Date).getTime())-
a._startTime};createjs.Ticker=a})();this.createjs=this.createjs||{};
(function(){function a(b){this.EventDispatcher_constructor();this.ignoreGlobalPause=!1;this.loop=0;this.bounce=this.reversed=this.useTicks=!1;this.timeScale=1;this.position=this.duration=0;this.rawPosition=-1;this._paused=!0;this._labelList=this._labels=this._parent=this._prev=this._next=null;b&&(this.useTicks=!!b.useTicks,this.ignoreGlobalPause=!!b.ignoreGlobalPause,this.loop=!0===b.loop?-1:b.loop||0,this.reversed=!!b.reversed,this.bounce=!!b.bounce,this.timeScale=b.timeScale||1,b.onChange&&this.addEventListener("change",
b.onChange),b.onComplete&&this.addEventListener("complete",b.onComplete))}var e=createjs.extend(a,createjs.EventDispatcher);e._setPaused=function(b){createjs.Tween._register(this,b);return this};e.setPaused=createjs.deprecate(e._setPaused,"AbstractTween.setPaused");e._getPaused=function(){return this._paused};e.getPaused=createjs.deprecate(e._getPaused,"AbstactTween.getPaused");e._getCurrentLabel=function(b){var d=this.getLabels();null==b&&(b=this.position);for(var c=0,f=d.length;c<f&&!(b<d[c].position);c++);
return 0===c?null:d[c-1].label};e.getCurrentLabel=createjs.deprecate(e._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(e,{paused:{set:e._setPaused,get:e._getPaused},currentLabel:{get:e._getCurrentLabel}})}catch(b){}e.advance=function(b,d){this.setPosition(this.rawPosition+b*this.timeScale,d)};e.setPosition=function(b,d,c,f){var h=this.duration,k=this.loop,m=this.rawPosition,g=0;0>b&&(b=0);if(0===h){var l=!0;if(-1!==m)return l}else{var n=b/h|0;g=b-n*h;(l=-1!==k&&b>=k*
h+h)&&(b=(g=h)*(n=k)+h);if(b===m)return l;!this.reversed!==!(this.bounce&&n%2)&&(g=h-g)}this.position=g;this.rawPosition=b;this._updatePosition(c,l);l&&(this.paused=!0);f&&f(this);d||this._runActions(m,b,c,!c&&-1===m);this.dispatchEvent("change");l&&this.dispatchEvent("complete")};e.calculatePosition=function(b){var d=this.duration,c=this.loop,f=0;if(0===d)return 0;-1!==c&&b>=c*d+d?(b=d,f=c):0>b?b=0:(f=b/d|0,b-=f*d);return!this.reversed!==!(this.bounce&&f%2)?d-b:b};e.getLabels=function(){var b=this._labelList;
if(!b){b=this._labelList=[];var d=this._labels,c;for(c in d)b.push({label:c,position:d[c]});b.sort(function(f,h){return f.position-h.position})}return b};e.setLabels=function(b){this._labels=b;this._labelList=null};e.addLabel=function(b,d){this._labels||(this._labels={});this._labels[b]=d;var c=this._labelList;if(c){for(var f=0,h=c.length;f<h&&!(d<c[f].position);f++);c.splice(f,0,{label:b,position:d})}};e.gotoAndPlay=function(b){this.paused=!1;this._goto(b)};e.gotoAndStop=function(b){this.paused=
!0;this._goto(b)};e.resolve=function(b){var d=Number(b);isNaN(d)&&(d=this._labels&&this._labels[b]);return d};e.toString=function(){return"[AbstractTween]"};e.clone=function(){throw"AbstractTween can not be cloned.";};e._init=function(b){b&&b.paused||(this.paused=!1);b&&null!=b.position&&this.setPosition(b.position)};e._updatePosition=function(b,d){};e._goto=function(b){b=this.resolve(b);null!=b&&this.setPosition(b,!1,!0)};e._runActions=function(b,d,c,f){if(this._actionHead||this.tweens){var h=this.duration,
k=this.reversed,m=this.bounce,g=this.loop,l,n,p;if(0===h){var v=l=n=p=0;k=m=!1}else v=b/h|0,l=d/h|0,n=b-v*h,p=d-l*h;-1!==g&&(l>g&&(p=h,l=g),v>g&&(n=h,v=g));if(c)return this._runActionsRange(p,p,c,f);if(v!==l||n!==p||c||f){-1===v&&(v=n=0);b=b<=d;d=v;do{g=d===v?n:b?0:h;var u=d===l?p:b?h:0;!k!==!(m&&d%2)&&(g=h-g,u=h-u);if((!m||d===v||g!==u)&&this._runActionsRange(g,u,c,f||d!==v&&!m))return!0;f=!1}while(b&&++d<=l||!b&&--d>=l)}}};e._runActionsRange=function(b,d,c,f){};createjs.AbstractTween=createjs.promote(a,
"EventDispatcher")})();this.createjs=this.createjs||{};
(function(){function a(c,f){this.AbstractTween_constructor(f);this.pluginData=null;this.target=c;this.passive=!1;this._stepTail=this._stepHead=new e(null,0,0,{},null,!0);this._stepPosition=0;this._injected=this._pluginIds=this._plugins=this._actionTail=this._actionHead=null;f&&(this.pluginData=f.pluginData,f.override&&a.removeTweens(c));this.pluginData||(this.pluginData={});this._init(f)}function e(c,f,h,k,m,g){this.next=null;this.prev=c;this.t=f;this.d=h;this.props=k;this.ease=m;this.passive=g;this.index=
c?c.index+1:0}function b(c,f,h,k,m){this.next=null;this.prev=c;this.t=f;this.d=0;this.scope=h;this.funct=k;this.params=m}var d=createjs.extend(a,createjs.AbstractTween);a.IGNORE={};a._tweens=[];a._plugins=null;a._tweenHead=null;a._tweenTail=null;a.get=function(c,f){return new a(c,f)};a.tick=function(c,f){for(var h=a._tweenHead;h;){var k=h._next;f&&!h.ignoreGlobalPause||h._paused||h.advance(h.useTicks?1:c);h=k}};a.handleEvent=function(c){"tick"===c.type&&this.tick(c.delta,c.paused)};a.removeTweens=
function(c){if(c.tweenjs_count){for(var f=a._tweenHead;f;){var h=f._next;f.target===c&&a._register(f,!0);f=h}c.tweenjs_count=0}};a.removeAllTweens=function(){for(var c=a._tweenHead;c;){var f=c._next;c._paused=!0;c.target&&(c.target.tweenjs_count=0);c._next=c._prev=null;c=f}a._tweenHead=a._tweenTail=null};a.hasActiveTweens=function(c){return c?!!c.tweenjs_count:!!a._tweenHead};a._installPlugin=function(c){for(var f=c.priority=c.priority||0,h=a._plugins=a._plugins||[],k=0,m=h.length;k<m&&!(f<h[k].priority);k++);
h.splice(k,0,c)};a._register=function(c,f){var h=c.target;if(!f&&c._paused)h&&(h.tweenjs_count=h.tweenjs_count?h.tweenjs_count+1:1),(h=a._tweenTail)?(a._tweenTail=h._next=c,c._prev=h):a._tweenHead=a._tweenTail=c,!a._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",a),a._inited=!0);else if(f&&!c._paused){h&&h.tweenjs_count--;h=c._next;var k=c._prev;h?h._prev=k:a._tweenTail=k;k?k._next=h:a._tweenHead=h;c._next=c._prev=null}c._paused=f};d.wait=function(c,f){0<c&&this._addStep(+c,this._stepTail.props,
null,f);return this};d.to=function(c,f,h){if(null==f||0>f)f=0;f=this._addStep(+f,null,h);this._appendProps(c,f);return this};d.label=function(c){this.addLabel(c,this.duration);return this};d.call=function(c,f,h){return this._addAction(h||this.target,c,f||[this])};d.set=function(c,f){return this._addAction(f||this.target,this._set,[c])};d.play=function(c){return this._addAction(c||this,this._set,[{paused:!1}])};d.pause=function(c){return this._addAction(c||this,this._set,[{paused:!0}])};d.w=d.wait;
d.t=d.to;d.c=d.call;d.s=d.set;d.toString=function(){return"[Tween]"};d.clone=function(){throw"Tween can not be cloned.";};d._addPlugin=function(c){var f=this._pluginIds||(this._pluginIds={}),h=c.ID;if(h&&!f[h]){f[h]=!0;f=this._plugins||(this._plugins=[]);h=c.priority||0;for(var k=0,m=f.length;k<m;k++)if(h<f[k].priority){f.splice(k,0,c);return}f.push(c)}};d._updatePosition=function(c,f){var h=this._stepHead.next,k=this.position,m=this.duration;if(this.target&&h){for(var g=h.next;g&&g.t<=k;)h=h.next,
g=h.next;this._updateTargetProps(h,f?0===m?1:k/m:(k-h.t)/h.d,f)}this._stepPosition=h?k-h.t:0};d._updateTargetProps=function(c,f,h){if(!(this.passive=!!c.passive)){var k,m=c.prev.props,g=c.props;if(k=c.ease)f=k(f,0,1,1);k=this._plugins;var l;a:for(l in m){var n=m[l];var p=g[l];n=n!==p&&"number"===typeof n?n+(p-n)*f:1<=f?p:n;if(k){p=0;for(var v=k.length;p<v;p++){var u=k[p].change(this,c,l,n,f,h);if(u===a.IGNORE)continue a;void 0!==u&&(n=u)}}this.target[l]=n}}};d._runActionsRange=function(c,f,h,k){var m=
(h=c>f)?this._actionTail:this._actionHead,g=f,l=c;h&&(g=c,l=f);for(var n=this.position;m;){var p=m.t;if(p===f||p>l&&p<g||k&&p===c)if(m.funct.apply(m.scope,m.params),n!==this.position)return!0;m=h?m.prev:m.next}};d._appendProps=function(c,f,h){var k=this._stepHead.props,m=this.target,g=a._plugins,l,n,p=f.prev,v=p.props,u=f.props||(f.props=this._cloneProps(v)),t={};for(l in c)if(c.hasOwnProperty(l)&&(t[l]=u[l]=c[l],void 0===k[l])){var w=void 0;if(g)for(n=g.length-1;0<=n;n--){var A=g[n].init(this,l,
w);void 0!==A&&(w=A);if(w===a.IGNORE){delete u[l];delete t[l];break}}w!==a.IGNORE&&(void 0===w&&(w=m[l]),v[l]=void 0===w?null:w)}for(l in t){var q;for(c=p;(q=c)&&(c=q.prev);)if(c.props!==q.props){if(void 0!==c.props[l])break;c.props[l]=v[l]}}if(!1!==h&&(g=this._plugins))for(n=g.length-1;0<=n;n--)g[n].step(this,f,t);if(h=this._injected)this._injected=null,this._appendProps(h,f,!1)};d._injectProp=function(c,f){(this._injected||(this._injected={}))[c]=f};d._addStep=function(c,f,h,k){f=new e(this._stepTail,
this.duration,c,f,h,k||!1);this.duration+=c;return this._stepTail=this._stepTail.next=f};d._addAction=function(c,f,h){c=new b(this._actionTail,this.duration,c,f,h);this._actionTail?this._actionTail.next=c:this._actionHead=c;this._actionTail=c;return this};d._set=function(c){for(var f in c)this[f]=c[f]};d._cloneProps=function(c){var f={},h;for(h in c)f[h]=c[h];return f};createjs.Tween=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(b){if(b instanceof Array||null==b&&1<arguments.length){var d=b;var c=arguments[1];b=arguments[2]}else b&&(d=b.tweens,c=b.labels);this.AbstractTween_constructor(b);this.tweens=[];d&&this.addTween.apply(this,d);this.setLabels(c);this._init(b)}var e=createjs.extend(a,createjs.AbstractTween);e.addTween=function(b){b._parent&&b._parent.removeTween(b);var d=arguments.length;if(1<d){for(var c=0;c<d;c++)this.addTween(arguments[c]);return arguments[d-1]}if(0===d)return null;this.tweens.push(b);
b._parent=this;b.paused=!0;d=b.duration;0<b.loop&&(d*=b.loop+1);d>this.duration&&(this.duration=d);0<=this.rawPosition&&b.setPosition(this.rawPosition);return b};e.removeTween=function(b){var d=arguments.length;if(1<d){for(var c=!0,f=0;f<d;f++)c=c&&this.removeTween(arguments[f]);return c}if(0===d)return!0;d=this.tweens;for(f=d.length;f--;)if(d[f]===b)return d.splice(f,1),b._parent=null,b.duration>=this.duration&&this.updateDuration(),!0;return!1};e.updateDuration=function(){for(var b=this.duration=
0,d=this.tweens.length;b<d;b++){var c=this.tweens[b],f=c.duration;0<c.loop&&(f*=c.loop+1);f>this.duration&&(this.duration=f)}};e.toString=function(){return"[Timeline]"};e.clone=function(){throw"Timeline can not be cloned.";};e._updatePosition=function(b,d){for(var c=this.position,f=0,h=this.tweens.length;f<h;f++)this.tweens[f].setPosition(c,!0,b)};e._runActionsRange=function(b,d,c,f){for(var h=this.position,k=0,m=this.tweens.length;k<m;k++)if(this.tweens[k]._runActions(b,d,c,f),h!==this.position)return!0};
createjs.Timeline=createjs.promote(a,"AbstractTween")})();this.createjs=this.createjs||{};
(function(){function a(){throw"Ease cannot be instantiated.";}a.linear=function(e){return e};a.none=a.linear;a.get=function(e){-1>e?e=-1:1<e&&(e=1);return function(b){return 0==e?b:0>e?b*(b*-e+1+e):b*((2-b)*e+(1-e))}};a.getPowIn=function(e){return function(b){return Math.pow(b,e)}};a.getPowOut=function(e){return function(b){return 1-Math.pow(1-b,e)}};a.getPowInOut=function(e){return function(b){return 1>(b*=2)?.5*Math.pow(b,e):1-.5*Math.abs(Math.pow(2-b,e))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);
a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)};a.sineOut=function(e){return Math.sin(e*Math.PI/2)};a.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)};a.getBackIn=function(e){return function(b){return b*b*((e+1)*b-e)}};
a.backIn=a.getBackIn(1.7);a.getBackOut=function(e){return function(b){return--b*b*((e+1)*b+e)+1}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(e){e*=1.525;return function(b){return 1>(b*=2)?.5*b*b*((e+1)*b-e):.5*((b-=2)*b*((e+1)*b+e)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(e){return-(Math.sqrt(1-e*e)-1)};a.circOut=function(e){return Math.sqrt(1- --e*e)};a.circInOut=function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};a.bounceIn=function(e){return 1-
a.bounceOut(1-e)};a.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};a.bounceInOut=function(e){return.5>e?.5*a.bounceIn(2*e):.5*a.bounceOut(2*e-1)+.5};a.getElasticIn=function(e,b){var d=2*Math.PI;return function(c){if(0==c||1==c)return c;var f=b/d*Math.asin(1/e);return-(e*Math.pow(2,10*--c)*Math.sin((c-f)*d/b))}};a.elasticIn=a.getElasticIn(1,.3);a.getElasticOut=function(e,b){var d=2*Math.PI;
return function(c){return 0==c||1==c?c:e*Math.pow(2,-10*c)*Math.sin((c-b/d*Math.asin(1/e))*d/b)+1}};a.elasticOut=a.getElasticOut(1,.3);a.getElasticInOut=function(e,b){var d=2*Math.PI;return function(c){var f=b/d*Math.asin(1/e);return 1>(c*=2)?-.5*e*Math.pow(2,10*--c)*Math.sin((c-f)*d/b):e*Math.pow(2,-10*--c)*Math.sin((c-f)*d/b)*.5+1}};a.elasticInOut=a.getElasticInOut(1,.3*1.5);createjs.Ease=a})();this.createjs=this.createjs||{};
(function(){function a(){throw"MotionGuidePlugin cannot be instantiated.";}a.priority=0;a.ID="MotionGuide";a.install=function(){createjs.Tween._installPlugin(a);return createjs.Tween.IGNORE};a.init=function(e,b,d){"guide"==b&&e._addPlugin(a)};a.step=function(e,b,d){for(var c in d)if("guide"===c){var f=b.props.guide,h=a._solveGuideData(d.guide,f);f.valid=!h;var k=f.endData;e._injectProp("x",k.x);e._injectProp("y",k.y);if(h||!f.orient)break;f.startOffsetRot=(void 0===b.prev.props.rotation?e.target.rotation||
0:b.prev.props.rotation)-f.startData.rotation;if("fixed"==f.orient)f.endAbsRot=k.rotation+f.startOffsetRot,f.deltaRotation=0;else{h=void 0===d.rotation?e.target.rotation||0:d.rotation;k=h-f.endData.rotation-f.startOffsetRot;var m=k%360;f.endAbsRot=h;switch(f.orient){case "auto":f.deltaRotation=k;break;case "cw":f.deltaRotation=(m+360)%360+360*Math.abs(k/360|0);break;case "ccw":f.deltaRotation=(m-360)%360+-360*Math.abs(k/360|0)}}e._injectProp("rotation",f.endAbsRot)}};a.change=function(e,b,d,c,f,h){if((c=
b.props.guide)&&b.props!==b.prev.props&&c!==b.prev.props.guide){if("guide"===d&&!c.valid||"x"==d||"y"==d||"rotation"===d&&c.orient)return createjs.Tween.IGNORE;a._ratioToPositionData(f,c,e.target)}};a.debug=function(e,b,d){e=e.guide||e;var c=a._findPathProblems(e);c&&console.error("MotionGuidePlugin Error found: \n"+c);if(!b)return c;var f,h=e.path,k=h.length;b.save();b.lineCap="round";b.lineJoin="miter";b.beginPath();b.moveTo(h[0],h[1]);for(f=2;f<k;f+=4)b.quadraticCurveTo(h[f],h[f+1],h[f+2],h[f+
3]);b.strokeStyle="black";b.lineWidth=4.5;b.stroke();b.strokeStyle="white";b.lineWidth=3;b.stroke();b.closePath();h=d.length;if(d&&h){k={};var m={};a._solveGuideData(e,k);for(f=0;f<h;f++)k.orient="fixed",a._ratioToPositionData(d[f],k,m),b.beginPath(),b.moveTo(m.x,m.y),b.lineTo(m.x+9*Math.cos(.0174533*m.rotation),m.y+9*Math.sin(.0174533*m.rotation)),b.strokeStyle="black",b.lineWidth=4.5,b.stroke(),b.strokeStyle="red",b.lineWidth=3,b.stroke(),b.closePath()}b.restore();return c};a._solveGuideData=function(e,
b){var d;if(d=a.debug(e))return d;var c=b.path=e.path;b.orient=e.orient;b.subLines=[];b.totalLength=0;b.startOffsetRot=0;b.deltaRotation=0;b.startData={ratio:0};b.endData={ratio:1};b.animSpan=1;var f=c.length,h,k={};var m=c[0];var g=c[1];for(d=2;d<f;d+=4){var l=c[d];var n=c[d+1];var p=c[d+2];var v=c[d+3];var u={weightings:[],estLength:0,portion:0},t=m;var w=g;for(h=1;10>=h;h++)a._getParamsForCurve(m,g,l,n,p,v,h/10,!1,k),t=k.x-t,w=k.y-w,w=Math.sqrt(t*t+w*w),u.weightings.push(w),u.estLength+=w,t=k.x,
w=k.y;b.totalLength+=u.estLength;for(h=0;10>h;h++)w=u.estLength,u.weightings[h]/=w;b.subLines.push(u);m=p;g=v}w=b.totalLength;c=b.subLines.length;for(d=0;d<c;d++)b.subLines[d].portion=b.subLines[d].estLength/w;d=isNaN(e.start)?0:e.start;c=isNaN(e.end)?1:e.end;a._ratioToPositionData(d,b,b.startData);a._ratioToPositionData(c,b,b.endData);b.startData.ratio=d;b.endData.ratio=c;b.animSpan=b.endData.ratio-b.startData.ratio};a._ratioToPositionData=function(e,b,d){var c=b.subLines,f,h=0,k=e*b.animSpan+b.startData.ratio;
var m=c.length;for(f=0;f<m;f++){var g=c[f].portion;if(h+g>=k){var l=f;break}h+=g}void 0===l&&(l=m-1,h-=g);c=c[l].weightings;var n=g;m=c.length;for(f=0;f<m;f++){g=c[f]*n;if(h+g>=k)break;h+=g}l=4*l+2;m=b.path;a._getParamsForCurve(m[l-2],m[l-1],m[l],m[l+1],m[l+2],m[l+3],f/10+(k-h)/g*.1,b.orient,d);b.orient&&(d.rotation=.99999<=e&&1.00001>=e&&void 0!==b.endAbsRot?b.endAbsRot:d.rotation+(b.startOffsetRot+e*b.deltaRotation));return d};a._getParamsForCurve=function(e,b,d,c,f,h,k,m,g){var l=1-k;g.x=l*l*e+
2*l*k*d+k*k*f;g.y=l*l*b+2*l*k*c+k*k*h;m&&(g.rotation=57.2957795*Math.atan2((c-b)*l+(h-c)*k,(d-e)*l+(f-d)*k))};a._findPathProblems=function(e){var b=e.path,d=b&&b.length||0;if(6>d||(d-2)%4)return"\tCannot parse 'path' array due to invalid number of entries in path. There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\nOnly [ "+(d+" ] values found. Expected: "+Math.max(4*
Math.ceil((d-2)/4)+2,6));for(var c=0;c<d;c++)if(isNaN(b[c]))return"All data in path array must be numeric";b=e.start;if(isNaN(b)&&void 0!==b)return"'start' out of bounds. Expected 0 to 1, got: "+b;b=e.end;if(isNaN(b)&&void 0!==b)return"'end' out of bounds. Expected 0 to 1, got: "+b;if((e=e.orient)&&"fixed"!=e&&"auto"!=e&&"cw"!=e&&"ccw"!=e)return'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+e};createjs.MotionGuidePlugin=a})();this.createjs=this.createjs||{};
(function(){var a=createjs.TweenJS=createjs.TweenJS||{};a.version="1.0.0";a.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"})();
(function(){var a="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},e="undefined"!==typeof module&&module.exports,b=function(){for(var f,h=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],k=0,m=h.length,g={};k<m;k++)if((f=h[k])&&f[1]in a){for(k=0;k<f.length;k++)g[h[0][k]]=f[k];return g}return!1}(),d={change:b.fullscreenchange,error:b.fullscreenerror},c={request:function(f){return new Promise(function(h,k){var m=function(){this.off("change",
m);h()}.bind(this);this.on("change",m);f=f||a.documentElement;Promise.resolve(f[b.requestFullscreen]())["catch"](k)}.bind(this))},exit:function(){return new Promise(function(f,h){if(this.isFullscreen){var k=function(){this.off("change",k);f()}.bind(this);this.on("change",k);Promise.resolve(a[b.exitFullscreen]())["catch"](h)}else f()}.bind(this))},toggle:function(f){return this.isFullscreen?this.exit():this.request(f)},onchange:function(f){this.on("change",f)},onerror:function(f){this.on("error",f)},
on:function(f,h){var k=d[f];k&&a.addEventListener(k,h,!1)},off:function(f,h){var k=d[f];k&&a.removeEventListener(k,h,!1)},raw:b};b?(Object.defineProperties(c,{isFullscreen:{get:function(){return!!a[b.fullscreenElement]}},element:{enumerable:!0,get:function(){return a[b.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!a[b.fullscreenEnabled]}}}),e?module.exports=c:window.screenfull=c):e?module.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})();
(function(){function a(q){q=String(q);return q.charAt(0).toUpperCase()+q.slice(1)}function e(q,H){var D=-1,x=q?q.length:0;if("number"==typeof x&&-1<x&&x<=v)for(;++D<x;)H(q[D],D,q);else d(q,H)}function b(q){q=String(q).replace(/^ +| +$/g,"");return/^(?:webOS|i(?:OS|P))/.test(q)?q:a(q)}function d(q,H){for(var D in q)t.call(q,D)&&H(q[D],D,q)}function c(q){return null==q?a(q):w.call(q).slice(8,-1)}function f(q,H){var D=null!=q?typeof q[H]:"number";return!/^(?:boolean|number|string|undefined)$/.test(D)&&
("object"==D?!!q[H]:!0)}function h(q){return String(q).replace(/([ -])(?!$)/g,"$1?")}function k(q,H){var D=null;e(q,function(x,C){D=H(D,x,C,q)});return D}function m(q){function H(J){return k(J,function(I,G){var K=G.pattern||h(G);!I&&(I=RegExp("\\b"+K+" *\\d+[.\\w_]*","i").exec(q)||RegExp("\\b"+K+" *\\w+-[\\w]*","i").exec(q)||RegExp("\\b"+K+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(q))&&((I=String(G.label&&!RegExp(K,"i").test(G.label)?G.label:I).split("/"))[1]&&!/[\d.]+/.test(I[0])&&(I[0]+=
" "+I[1]),G=G.label||G,I=b(I[0].replace(RegExp(K,"i"),G).replace(RegExp("; *(?:"+G+"[_-])?","i")," ").replace(RegExp("("+G+")[-_.]?(\\w)","i"),"$1 $2")));return I})}function D(J){return k(J,function(I,G){return I||(RegExp(G+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(q)||0)[1]||null})}var x=l,C=q&&"object"==typeof q&&"String"!=c(q);C&&(x=q,q=null);var L=x.navigator||{},B=L.userAgent||"";q||(q=B);var S=C?!!L.likeChrome:/\bChrome\b/.test(q)&&!/internal|\n/i.test(w.toString()),
M=C?"Object":"ScriptBridgingProxyObject",W=C?"Object":"Environment",R=C&&x.java?"JavaPackage":c(x.java),ba=C?"Object":"RuntimeObject";W=(R=/\bJava/.test(R)&&x.java)&&c(x.environment)==W;var ca=R?"a":"\u03b1",da=R?"b":"\u03b2",X=x.document||{},P=x.operamini||x.opera,T=u.test(T=C&&P?P["[[Class]]"]:c(P))?T:P=null,r,U=q;C=[];var V=null,Q=q==B;B=Q&&P&&"function"==typeof P.version&&P.version();var E=function(J){return k(J,function(I,G){return I||RegExp("\\b"+(G.pattern||h(G))+"\\b","i").exec(q)&&(G.label||
G)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),y=function(J){return k(J,function(I,G){return I||RegExp("\\b"+(G.pattern||h(G))+"\\b","i").exec(q)&&(G.label||G)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser",
"PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},
{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),F=H([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad",
"iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),N=function(J){return k(J,function(I,G,K){return I||(G[F]||G[/^[a-z]+(?: +[a-z]+\b)*/i.exec(F)]||RegExp("\\b"+h(K)+"(?:\\b|\\w*\\d)","i").exec(q))&&K})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},
"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),z=function(J){return k(J,function(I,G){var K=G.pattern||h(G);if(!I&&(I=RegExp("\\b"+K+"(?:/[\\d.]+|[ \\w.]*)","i").exec(q))){var O=I,Y=G.label||G,Z={"10.0":"10","6.4":"10 Technical Preview",
"6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};K&&Y&&/^Win/i.test(O)&&!/^Windows Phone /i.test(O)&&(Z=Z[/[\d.]+$/.exec(O)])&&(O="Windows "+Z);O=String(O);K&&Y&&(O=O.replace(RegExp(K,"i"),Y));I=O=b(O.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/,
" $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}return I})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac",
"Windows 98;","Windows "]);E&&(E=[E]);N&&!F&&(F=H([N]));if(r=/\bGoogle TV\b/.exec(F))F=r[0];/\bSimulator\b/i.test(q)&&(F=(F?F+" ":"")+"Simulator");"Opera Mini"==y&&/\bOPiOS\b/.test(q)&&C.push("running in Turbo/Uncompressed mode");"IE"==y&&/\blike iPhone OS\b/.test(q)?(r=m(q.replace(/like iPhone OS/,"")),N=r.manufacturer,F=r.product):/^iP/.test(F)?(y||(y="Safari"),z="iOS"+((r=/ OS ([\d_]+)/i.exec(q))?" "+r[1].replace(/_/g,"."):"")):"Konqueror"!=y||/buntu/i.test(z)?N&&"Google"!=N&&(/Chrome/.test(y)&&
!/\bMobile Safari\b/i.test(q)||/\bVita\b/.test(F))||/\bAndroid\b/.test(z)&&/^Chrome/.test(y)&&/\bVersion\//i.test(q)?(y="Android Browser",z=/\bAndroid\b/.test(z)?z:"Android"):"Silk"==y?(/\bMobi/i.test(q)||(z="Android",C.unshift("desktop mode")),/Accelerated *= *true/i.test(q)&&C.unshift("accelerated")):"PaleMoon"==y&&(r=/\bFirefox\/([\d.]+)\b/.exec(q))?C.push("identifying as Firefox "+r[1]):"Firefox"==y&&(r=/\b(Mobile|Tablet|TV)\b/i.exec(q))?(z||(z="Firefox OS"),F||(F=r[1])):!y||(r=!/\bMinefield\b/i.test(q)&&
/\b(?:Firefox|Safari)\b/.exec(y))?(y&&!F&&/[\/,]|^[^(]+?\)/.test(q.slice(q.indexOf(r+"/")+8))&&(y=null),(r=F||N||z)&&(F||N||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(z))&&(y=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(z)?z:r)+" Browser")):"Electron"==y&&(r=(/\bChrome\/([\d.]+)\b/.exec(q)||0)[1])&&C.push("Chromium "+r):z="Kubuntu";B||(B=D(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",h(y),"(?:Firefox|Minefield|NetFront)"]));
if(r="iCab"==E&&3<parseFloat(B)&&"WebKit"||/\bOpera\b/.test(y)&&(/\bOPR\b/.test(q)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(q)&&!/^(?:Trident|EdgeHTML)$/.test(E)&&"WebKit"||!E&&/\bMSIE\b/i.test(q)&&("Mac OS"==z?"Tasman":"Trident")||"WebKit"==E&&/\bPlayStation\b(?! Vita\b)/i.test(y)&&"NetFront")E=[r];"IE"==y&&(r=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(q)||0)[1])?(y+=" Mobile",z="Windows Phone "+(/\+$/.test(r)?r:r+".x"),C.unshift("desktop mode")):/\bWPDesktop\b/i.test(q)?(y="IE Mobile",z="Windows Phone 8.x",
C.unshift("desktop mode"),B||(B=(/\brv:([\d.]+)/.exec(q)||0)[1])):"IE"!=y&&"Trident"==E&&(r=/\brv:([\d.]+)/.exec(q))&&(y&&C.push("identifying as "+y+(B?" "+B:"")),y="IE",B=r[1]);if(Q){if(f(x,"global"))if(R&&(r=R.lang.System,U=r.getProperty("os.arch"),z=z||r.getProperty("os.name")+" "+r.getProperty("os.version")),W){try{B=x.require("ringo/engine").version.join("."),y="RingoJS"}catch(J){(r=x.system)&&r.global.system==x.system&&(y="Narwhal",z||(z=r[0].os||null))}y||(y="Rhino")}else"object"==typeof x.process&&
!x.process.browser&&(r=x.process)&&("object"==typeof r.versions&&("string"==typeof r.versions.electron?(C.push("Node "+r.versions.node),y="Electron",B=r.versions.electron):"string"==typeof r.versions.nw&&(C.push("Chromium "+B,"Node "+r.versions.node),y="NW.js",B=r.versions.nw)),y||(y="Node.js",U=r.arch,z=r.platform,B=(B=/[\d.]+/.exec(r.version))?B[0]:null));else c(r=x.runtime)==M?(y="Adobe AIR",z=r.flash.system.Capabilities.os):c(r=x.phantom)==ba?(y="PhantomJS",B=(r=r.version||null)&&r.major+"."+
r.minor+"."+r.patch):"number"==typeof X.documentMode&&(r=/\bTrident\/(\d+)/i.exec(q))?(B=[B,X.documentMode],(r=+r[1]+4)!=B[1]&&(C.push("IE "+B[1]+" mode"),E&&(E[1]=""),B[1]=r),B="IE"==y?String(B[1].toFixed(1)):B[0]):"number"==typeof X.documentMode&&/^(?:Chrome|Firefox)\b/.test(y)&&(C.push("masking as "+y+" "+B),y="IE",B="11.0",E=["Trident"],z="Windows");z=z&&b(z)}B&&(r=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(B)||/(?:alpha|beta)(?: ?\d)?/i.exec(q+";"+(Q&&L.appMinorVersion))||/\bMinefield\b/i.test(q)&&
"a")&&(V=/b/i.test(r)?"beta":"alpha",B=B.replace(RegExp(r+"\\+?$"),"")+("beta"==V?da:ca)+(/\d+\+?/.exec(r)||""));if("Fennec"==y||"Firefox"==y&&/\b(?:Android|Firefox OS)\b/.test(z))y="Firefox Mobile";else if("Maxthon"==y&&B)B=B.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(F))"Xbox 360"==F&&(z=null),"Xbox 360"==F&&/\bIEMobile\b/.test(q)&&C.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(y)&&(!y||F||/Browser|Mobi/.test(y))||"Windows CE"!=z&&!/Mobi/i.test(q))if("IE"==y&&Q)try{null===
x.external&&C.unshift("platform preview")}catch(J){C.unshift("embedded")}else(/\bBlackBerry\b/.test(F)||/\bBB10\b/.test(q))&&(r=(RegExp(F.replace(/ +/g," *")+"/([.\\d]+)","i").exec(q)||0)[1]||B)?(r=[r,/BB10/.test(q)],z=(r[1]?(F=null,N="BlackBerry"):"Device Software")+" "+r[0],B=null):this!=d&&"Wii"!=F&&(Q&&P||/Opera/.test(y)&&/\b(?:MSIE|Firefox)\b/i.test(q)||"Firefox"==y&&/\bOS X (?:\d+\.){2,}/.test(z)||"IE"==y&&(z&&!/^Win/.test(z)&&5.5<B||/\bWindows XP\b/.test(z)&&8<B||8==B&&!/\bTrident\b/.test(q)))&&
!u.test(r=m.call(d,q.replace(u,"")+";"))&&r.name&&(r="ing as "+r.name+((r=r.version)?" "+r:""),u.test(y)?(/\bIE\b/.test(r)&&"Mac OS"==z&&(z=null),r="identify"+r):(r="mask"+r,y=T?b(T.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(r)&&(z=null),Q||(B=null)),E=["Presto"],C.push(r));else y+=" Mobile";if(r=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(q)||0)[1]){r=[parseFloat(r.replace(/\.(\d)$/,".0$1")),r];if("Safari"==y&&"+"==r[1].slice(-1))y="WebKit Nightly",V="alpha",B=r[1].slice(0,-1);else if(B==
r[1]||B==(r[2]=(/\bSafari\/([\d.]+\+?)/i.exec(q)||0)[1]))B=null;r[1]=(/\bChrome\/([\d.]+)/i.exec(q)||0)[1];537.36==r[0]&&537.36==r[2]&&28<=parseFloat(r[1])&&"WebKit"==E&&(E=["Blink"]);Q&&(S||r[1])?(E&&(E[1]="like Chrome"),r=r[1]||(r=r[0],530>r?1:532>r?2:532.05>r?3:533>r?4:534.03>r?5:534.07>r?6:534.1>r?7:534.13>r?8:534.16>r?9:534.24>r?10:534.3>r?11:535.01>r?12:535.02>r?"13+":535.07>r?15:535.11>r?16:535.19>r?17:536.05>r?18:536.1>r?19:537.01>r?20:537.11>r?"21+":537.13>r?23:537.18>r?24:537.24>r?25:537.36>
r?26:"Blink"!=E?"27":"28")):(E&&(E[1]="like Safari"),r=(r=r[0],400>r?1:500>r?2:526>r?3:533>r?4:534>r?"4+":535>r?5:537>r?6:538>r?7:601>r?8:"8"));E&&(E[1]+=" "+(r+="number"==typeof r?".x":/[.+]/.test(r)?"":"+"));"Safari"==y&&(!B||45<parseInt(B))&&(B=r)}"Opera"==y&&(r=/\bzbov|zvav$/.exec(z))?(y+=" ",C.unshift("desktop mode"),"zvav"==r?(y+="Mini",B=null):y+="Mobile",z=z.replace(RegExp(" *"+r+"$"),"")):"Safari"==y&&/\bChrome\b/.exec(E&&E[1])&&(C.unshift("desktop mode"),y="Chrome Mobile",B=null,/\bOS X\b/.test(z)?
(N="Apple",z="iOS 4.3+"):z=null);B&&0==B.indexOf(r=/[\d.]+$/.exec(z))&&-1<q.indexOf("/"+r+"-")&&(z=String(z.replace(r,"")).replace(/^ +| +$/g,""));E&&!/\b(?:Avant|Nook)\b/.test(y)&&(/Browser|Lunascape|Maxthon/.test(y)||"Safari"!=y&&/^iOS/.test(z)&&/\bSafari\b/.test(E[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(y)&&E[1])&&(r=E[E.length-1])&&C.push(r);C.length&&(C=["("+C.join("; ")+")"]);N&&F&&0>F.indexOf(N)&&C.push("on "+N);F&&C.push((/^on /.test(C[C.length-
1])?"":"on ")+F);if(z){var aa=(r=/ ([\d.+]+)$/.exec(z))&&"/"==z.charAt(z.length-r[0].length-1);z={architecture:32,family:r&&!aa?z.replace(r[0],""):z,version:r?r[1]:null,toString:function(){var J=this.version;return this.family+(J&&!aa?" "+J:"")+(64==this.architecture?" 64-bit":"")}}}(r=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(U))&&!/\bi686\b/i.test(U)?(z&&(z.architecture=64,z.family=z.family.replace(RegExp(" *"+r),"")),y&&(/\bWOW64\b/i.test(q)||Q&&/\w(?:86|32)$/.test(L.cpuClass||L.platform)&&!/\bWin64; x64\b/i.test(q))&&
C.unshift("32-bit")):z&&/^OS X/.test(z.family)&&"Chrome"==y&&39<=parseFloat(B)&&(z.architecture=64);q||(q=null);x={};x.description=q;x.layout=E&&E[0];x.manufacturer=N;x.name=y;x.prerelease=V;x.product=F;x.ua=q;x.version=y&&B;x.os=z||{architecture:null,family:null,version:null,toString:function(){return"null"}};x.parse=m;x.toString=function(){return this.description||""};x.version&&C.unshift(B);x.name&&C.unshift(y);z&&y&&(z!=String(z).split(" ")[0]||z!=y.split(" ")[0]&&!F)&&C.push(F?"("+z+")":"on "+
z);C.length&&(x.description=C.join(" "));return x}var g={"function":!0,object:!0},l=g[typeof window]&&window||this,n=g[typeof exports]&&exports;g=g[typeof module]&&module&&!module.nodeType&&module;var p=n&&g&&"object"==typeof global&&global;!p||p.global!==p&&p.window!==p&&p.self!==p||(l=p);var v=Math.pow(2,53)-1,u=/\bOpera/;p=Object.prototype;var t=p.hasOwnProperty,w=p.toString,A=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(l.platform=A,define(function(){return A})):n&&
g?d(A,function(q,H){n[H]=q}):l.platform=A}).call(this);
function buildIOSMeta(){for(var a=[{name:"viewport",content:"width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"black"}],e=0;e<a.length;e++){var b=document.createElement("meta");b.name=a[e].name;b.content=a[e].content;var d=window.document.head.querySelector('meta[name="'+b.name+'"]');d&&d.parentNode.removeChild(d);window.document.head.appendChild(b)}}
function hideIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","none");jQuery(".xxx-ios-fullscreen-scroll").css("display","none");jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se")}function buildIOSFullscreenPanel(){jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>')}
function showIOSFullscreenPanel(){jQuery(".xxx-ios-fullscreen-message").css("display","block");jQuery(".xxx-ios-fullscreen-scroll").css("display","block")}
function __iosResize(){window.scrollTo(0,0);if("iPhone"===platform.product)switch(window.devicePixelRatio){case 2:switch(window.innerWidth){case 568:320!==window.innerHeight&&jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se");break;case 667:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;case 3:switch(window.innerWidth){case 736:414===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;
case 724:375===window.innerHeight?hideIOSFullscreenPanel():showIOSFullscreenPanel();break;default:hideIOSFullscreenPanel()}break;default:hideIOSFullscreenPanel()}}function iosResize(){__iosResize();setTimeout(function(){__iosResize()},500)}$(document).ready(function(){platform&&"iPhone"===platform.product&&"Safari"===platform.name&&(buildIOSFullscreenPanel(),buildIOSMeta())});jQuery(window).resize(function(){platform&&"iPhone"===platform.product&&"Safari"===platform.name&&iosResize()});
var s_iScaleFactor=1,s_iOffsetX,s_iOffsetY,s_bIsRetina,s_bFocus=!0;
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||
navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(a){console.log(a)}function isIOS(){isRetina();for(var a="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");a.length;)if(navigator.platform===a.pop())return!0;return!1}function isRetina(){s_bIsRetina=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?!0:!1}
function isIpad(){var a=-1!==navigator.userAgent.toLowerCase().indexOf("ipad");return!a&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints?!0:a}function isMobile(){return isIpad()?!0:jQuery.browser.mobile}function checkIfiOS(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1}
function getSize(a){var e=a.toLowerCase(),b=window.document,d=b.documentElement;if(void 0===window["inner"+a])a=d["client"+a];else if(window["inner"+a]!=d["client"+a]){var c=b.createElement("body");c.id="vpw-test-b";c.style.cssText="overflow:scroll";var f=b.createElement("div");f.id="vpw-test-d";f.style.cssText="position:absolute;top:-1000px";f.innerHTML="<style>@media("+e+":"+d["client"+a]+"px){body#vpw-test-b div#vpw-test-d{"+e+":7px!important}}</style>";c.appendChild(f);d.insertBefore(c,b.head);
a=7==f["offset"+a]?d["client"+a]:window["inner"+a];d.removeChild(c)}else a=window["inner"+a];return a}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){sizeHandler()}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var a=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<a?a:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var a=null!==platform.name&&"safari"===platform.name.toLowerCase()?getIOSWindowHeight():getSize("Height");var e=getSize("Width");s_bFocus&&_checkOrientation(e,a);var b=Math.min(a/CANVAS_HEIGHT,e/CANVAS_WIDTH),d=Math.round(CANVAS_WIDTH*b);b=Math.round(CANVAS_HEIGHT*b);if(b<a){var c=a-b;b+=c;d+=CANVAS_WIDTH/CANVAS_HEIGHT*c}else d<e&&(c=e-d,d+=c,b+=CANVAS_HEIGHT/CANVAS_WIDTH*c);c=a/2-b/2;var f=e/2-d/2,h=CANVAS_WIDTH/d;if(f*h<-EDGEBOARD_X||
c*h<-EDGEBOARD_Y)b=Math.min(a/(CANVAS_HEIGHT-2*EDGEBOARD_Y),e/(CANVAS_WIDTH-2*EDGEBOARD_X)),d=Math.round(CANVAS_WIDTH*b),b=Math.round(CANVAS_HEIGHT*b),c=(a-b)/2,f=(e-d)/2,h=CANVAS_WIDTH/d;s_iOffsetX=-1*f*h;s_iOffsetY=-1*c*h;0<=c&&(s_iOffsetY=0);0<=f&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenuMode&&s_oMenuMode.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);s_bIsRetina&&s_oStage?(canvas=
document.getElementById("canvas"),s_oStage.canvas.width=2*d,s_oStage.canvas.height=2*b,canvas.style.width=d+"px",canvas.style.height=b+"px",s_oStage.scaleX=s_oStage.scaleY=2*Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT)):s_bMobile?($("#canvas").css("width",d+"px"),$("#canvas").css("height",b+"px")):s_oStage&&(s_oStage.canvas.width=d,s_oStage.canvas.height=b,s_iScaleFactor=Math.min(d/CANVAS_WIDTH,b/CANVAS_HEIGHT),s_oStage.scaleX=s_oStage.scaleY=s_iScaleFactor);0>c||(c=(a-b)/2);$("#canvas").css("top",c+
"px");$("#canvas").css("left",f+"px");fullscreenHandler()}}
function _checkOrientation(a,e){s_bMobile&&ENABLE_CHECK_ORIENTATION&&(a>e?"landscape"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),s_oMain.stopUpdate()):"portrait"===$(".orientation-msg-container").attr("data-orientation")?($(".orientation-msg-container").css("display","none"),s_oMain.startUpdate()):($(".orientation-msg-container").css("display","block"),
s_oMain.stopUpdate()))}function createBitmap(a,e,b){var d=new createjs.Bitmap(a),c=new createjs.Shape;e&&b?c.graphics.beginFill("#fff").drawRect(0,0,e,b):c.graphics.beginFill("#ff0").drawRect(0,0,a.width,a.height);d.hitArea=c;return d}function createSprite(a,e,b,d,c,f){a=null!==e?new createjs.Sprite(a,e):new createjs.Sprite(a);e=new createjs.Shape;e.graphics.beginFill("#000000").drawRect(-b,-d,c,f);a.hitArea=e;return a}
function randomFloatBetween(a,e,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(a+Math.random()*(e-a),e).toFixed(b))}function formatTime(a){a/=1E3;var e=Math.floor(a/60);a=Math.floor(a-60*e);var b="";b=10>e?b+("0"+e+":"):b+(e+":");return 10>a?b+("0"+a):b+a}function NoClickDelay(a){this.element=a;window.Touch&&this.element.addEventListener("touchstart",this,!1)}function shuffle(a){for(var e=a.length,b,d;0<e;)d=Math.floor(Math.random()*e),e--,b=a[e],a[e]=a[d],a[d]=b;return a}
NoClickDelay.prototype={handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onTouchEnd(a)}},onTouchStart:function(a){a.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(a){this.moved=!0},onTouchEnd:function(a){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){a=document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY);3==a.nodeType&&(a=a.parentNode);var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0);a.dispatchEvent(e)}}};function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}
function getParamValue(a){for(var e=window.location.search.substring(1).split("&"),b=0;b<e.length;b++){var d=e[b].split("=");if(d[0]==a)return d[1]}}function playSound(a,e,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?(s_aSounds[a].play(),s_aSounds[a].volume(e),s_aSounds[a].loop(b),s_aSounds[a]):null}function stopSound(a){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].stop()}function setVolume(a,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].volume(e)}
function setMute(a,e){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||s_aSounds[a].mute(e)}function easeLinear(a,e,b,d){return b*a/d+e}function distanceSquaredToLineSegment2(a,e,b,d,c,f,h){c?(c=((f-a)*b+(h-e)*d)/c,0>c?c=0:1<c&&(c=1)):c=0;a=f-(a+c*b);e=h-(e+c*d);return a*a+e*e}function distanceSquaredToLineSegment(a,e,b,d,c,f){b-=a;d-=e;return distanceSquaredToLineSegment2(a,e,b,d,b*b+d*d,c,f)}function distanceToLineSegment(a,e,b,d,c,f){return Math.sqrt(distanceSquaredToLineSegment(a,e,b,d,c,f))}
function collisionWithCircle(a,e,b){var d=a.getX()-e.getX(),c=a.getY()-e.getY();return Math.sqrt(d*d+c*c)<a.getCollision()*b+e.getCollision()*b?!0:!1}function checkRectCollision(a,e){var b=getBounds(a,.9);var d=getBounds(e,.98);return calculateIntersection(b,d)}
function calculateIntersection(a,e){var b,d,c,f;var h=a.x+(b=a.width/2);var k=a.y+(d=a.height/2);var m=e.x+(c=e.width/2);var g=e.y+(f=e.height/2);h=Math.abs(h-m)-(b+c);k=Math.abs(k-g)-(d+f);return 0>h&&0>k?(h=Math.min(Math.min(a.width,e.width),-h),k=Math.min(Math.min(a.height,e.height),-k),{x:Math.max(a.x,e.x),y:Math.max(a.y,e.y),width:h,height:k,rect1:a,rect2:e}):null}
function getBounds(a,e){var b={x:Infinity,y:Infinity,width:0,height:0};if(a instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var d=a.children,c=d.length,f;for(f=0;f<c;f++){var h=getBounds(d[f],1);h.x<b.x&&(b.x=h.x);h.y<b.y&&(b.y=h.y);h.x+h.width>b.x2&&(b.x2=h.x+h.width);h.y+h.height>b.y2&&(b.y2=h.y+h.height)}Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{if(a instanceof createjs.Bitmap){c=
a.sourceRect||a.image;f=c.width*e;var k=c.height*e}else if(a instanceof createjs.Sprite)if(a.spriteSheet._frames&&a.spriteSheet._frames[a.currentFrame]&&a.spriteSheet._frames[a.currentFrame].image){c=a.spriteSheet.getFrame(a.currentFrame);f=c.rect.width;k=c.rect.height;d=c.regX;var m=c.regY}else b.x=a.x||0,b.y=a.y||0;else b.x=a.x||0,b.y=a.y||0;d=d||0;f=f||0;m=m||0;k=k||0;b.regX=d;b.regY=m;c=a.localToGlobal(0-d,0-m);h=a.localToGlobal(f-d,k-m);f=a.localToGlobal(f-d,0-m);d=a.localToGlobal(0-d,k-m);b.x=
Math.min(Math.min(Math.min(c.x,h.x),f.x),d.x);b.y=Math.min(Math.min(Math.min(c.y,h.y),f.y),d.y);b.width=Math.max(Math.max(Math.max(c.x,h.x),f.x),d.x)-b.x;b.height=Math.max(Math.max(Math.max(c.y,h.y),f.y),d.y)-b.y}return b}
(function(){function a(b){var d={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in d?document.body.className=d[b.type]:(document.body.className=this[e]?"hidden":"visible","hidden"===document.body.className?(s_oMain.stopUpdate(),s_bFocus=!1):(s_oMain.startUpdate(),s_bFocus=!0))}var e="hidden";e in document?document.addEventListener("visibilitychange",a):(e="mozHidden")in document?document.addEventListener("mozvisibilitychange",
a):(e="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(e="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a})();function saveItem(a,e){s_bStorageAvailable&&localStorage.setItem(a,e)}function getItem(a){return s_bStorageAvailable?localStorage.getItem(a):null}
function fullscreenHandler(){ENABLE_FULLSCREEN&&!1!==screenfull.isEnabled&&(s_bFullscreen=screenfull.isFullscreen,null!==s_oInterface&&s_oInterface.resetFullscreenBut(),null!==s_oMenu&&s_oMenu.resetFullscreenBut())}if(screenfull.isEnabled)screenfull.on("change",function(){s_bFullscreen=screenfull.isFullscreen;null!==s_oInterface&&s_oInterface.resetFullscreenBut();null!==s_oMenu&&s_oMenu.resetFullscreenBut()});
function CSpriteLibrary(){var a={},e,b,d,c,f,h;this.init=function(k,m,g){e={};d=b=0;c=k;f=m;h=g};this.addSprite=function(k,m){if(!a.hasOwnProperty(k)){var g=new Image;a[k]=e[k]={szPath:m,oSprite:g,bLoaded:!1};b++}};this.getSprite=function(k){return a.hasOwnProperty(k)?a[k].oSprite:null};this._onSpritesLoaded=function(){b=0;f.call(h)};this._onSpriteLoaded=function(){c.call(h);++d===b&&this._onSpritesLoaded()};this.loadSprites=function(){for(var k in e)e[k].oSprite.oSpriteLibrary=this,e[k].oSprite.szKey=
k,e[k].oSprite.onload=function(){this.oSpriteLibrary.setLoaded(this.szKey);this.oSpriteLibrary._onSpriteLoaded(this.szKey)},e[k].oSprite.onerror=function(m){var g=m.currentTarget;setTimeout(function(){e[g.szKey].oSprite.src=e[g.szKey].szPath},500)},e[k].oSprite.src=e[k].szPath};this.setLoaded=function(k){a[k].bLoaded=!0};this.isLoaded=function(k){return a[k].bLoaded};this.getNumSprites=function(){return b}}
!function(){function a(c){var f=c;if(d[f])f=d[f];else{for(var h=f,k,m=[],g=0;h;){if(null!==(k=b.text.exec(h)))m.push(k[0]);else if(null!==(k=b.modulo.exec(h)))m.push("%");else if(null!==(k=b.placeholder.exec(h))){if(k[2]){g|=1;var l=[],n=k[2],p;if(null!==(p=b.key.exec(n)))for(l.push(p[1]);""!==(n=n.substring(p[0].length));)if(null!==(p=b.key_access.exec(n)))l.push(p[1]);else if(null!==(p=b.index_access.exec(n)))l.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");
else throw new SyntaxError("[sprintf] failed to parse named argument key");k[2]=l}else g|=2;if(3===g)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");m.push({placeholder:k[0],param_no:k[1],keys:k[2],sign:k[3],pad_char:k[4],align:k[5],width:k[6],precision:k[7],type:k[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");h=h.substring(k[0].length)}f=d[f]=m}h=arguments;k=1;m=f.length;l="";var v,u;for(n=0;n<m;n++)if("string"===typeof f[n])l+=f[n];
else if("object"===typeof f[n]){p=f[n];if(p.keys)for(g=h[k],v=0;v<p.keys.length;v++){if(void 0==g)throw Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[v],p.keys[v-1]));g=g[p.keys[v]]}else g=p.param_no?h[p.param_no]:h[k++];b.not_type.test(p.type)&&b.not_primitive.test(p.type)&&g instanceof Function&&(g=g());if(b.numeric_arg.test(p.type)&&"number"!==typeof g&&isNaN(g))throw new TypeError(a("[sprintf] expecting number but found %T",g));b.number.test(p.type)&&(u=0<=g);
switch(p.type){case "b":g=parseInt(g,10).toString(2);break;case "c":g=String.fromCharCode(parseInt(g,10));break;case "d":case "i":g=parseInt(g,10);break;case "j":g=JSON.stringify(g,null,p.width?parseInt(p.width):0);break;case "e":g=p.precision?parseFloat(g).toExponential(p.precision):parseFloat(g).toExponential();break;case "f":g=p.precision?parseFloat(g).toFixed(p.precision):parseFloat(g);break;case "g":g=p.precision?String(Number(g.toPrecision(p.precision))):parseFloat(g);break;case "o":g=(parseInt(g,
10)>>>0).toString(8);break;case "s":g=String(g);g=p.precision?g.substring(0,p.precision):g;break;case "t":g=String(!!g);g=p.precision?g.substring(0,p.precision):g;break;case "T":g=Object.prototype.toString.call(g).slice(8,-1).toLowerCase();g=p.precision?g.substring(0,p.precision):g;break;case "u":g=parseInt(g,10)>>>0;break;case "v":g=g.valueOf();g=p.precision?g.substring(0,p.precision):g;break;case "x":g=(parseInt(g,10)>>>0).toString(16);break;case "X":g=(parseInt(g,10)>>>0).toString(16).toUpperCase()}if(b.json.test(p.type))l+=
g;else{if(!b.number.test(p.type)||u&&!p.sign)var t="";else t=u?"+":"-",g=g.toString().replace(b.sign,"");v=p.pad_char?"0"===p.pad_char?"0":p.pad_char.charAt(1):" ";var w=p.width-(t+g).length;w=p.width?0<w?v.repeat(w):"":"";l+=p.align?t+g+w:"0"===v?t+w+g:w+t+g}}return l}function e(c,f){return a.apply(null,[c].concat(f||[]))}var b={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,
placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},d=Object.create(null);"undefined"!==typeof exports&&(exports.sprintf=a,exports.vsprintf=e);"undefined"!==typeof window&&(window.sprintf=a,window.vsprintf=e,"function"===typeof define&&define.amd&&define(function(){return{sprintf:a,vsprintf:e}}))}();
CTLText.prototype={constructor:CTLText,__autofit:function(){if(this._bFitText){for(var a=this._iFontSize;(this._oText.getBounds().height>this._iHeight-2*this._iPaddingV||this._oText.getBounds().width>this._iWidth-2*this._iPaddingH)&&!(a--,this._oText.font=a+"px "+this._szFont,this._oText.lineHeight=Math.round(a*this._fLineHeightFactor),this.__updateY(),this.__verticalAlign(),8>a););this._iFontSize=a}},__verticalAlign:function(){if(this._bVerticalAlign){var a=this._oText.getBounds().height;this._oText.y-=
(a-this._iHeight)/2+this._iPaddingV}},__updateY:function(){this._oText.y=this._y+this._iPaddingV;switch(this._oText.textBaseline){case "middle":this._oText.y+=this._oText.lineHeight/2+(this._iFontSize*this._fLineHeightFactor-this._iFontSize)}},__createText:function(a){this._bDebug&&(this._oDebugShape=new createjs.Shape,this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x,this._y,this._iWidth,this._iHeight),this._oContainer.addChild(this._oDebugShape));this._oText=new createjs.Text(a,
this._iFontSize+"px "+this._szFont,this._szColor);this._oText.textBaseline="middle";this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this._oText.textAlign=this._szAlign;this._oText.lineWidth=this._bMultiline?this._iWidth-2*this._iPaddingH:null;switch(this._szAlign){case "center":this._oText.x=this._x+this._iWidth/2;break;case "left":this._oText.x=this._x+this._iPaddingH;break;case "right":this._oText.x=this._x+this._iWidth-this._iPaddingH}this._oContainer.addChild(this._oText);
this.refreshText(a)},setVerticalAlign:function(a){this._bVerticalAlign=a},setOutline:function(a){null!==this._oText&&(this._oText.outline=a)},setShadow:function(a,e,b,d){null!==this._oText&&(this._oText.shadow=new createjs.Shadow(a,e,b,d))},setColor:function(a){this._oText.color=a},setAlpha:function(a){this._oText.alpha=a},setX:function(a){this._x=this._oText.x=a},setY:function(a){this._y=this._oText.y=a},removeTweens:function(){createjs.Tween.removeTweens(this._oText)},getText:function(){return this._oText},
getY:function(){return this._y},getFontSize:function(){return this._iFontSize},refreshText:function(a){""===a&&(a=" ");null===this._oText&&this.__createText(a);this._oText.text=a;this._oText.font=this._iFontSize+"px "+this._szFont;this._oText.lineHeight=Math.round(this._iFontSize*this._fLineHeightFactor);this.__autofit();this.__updateY();this.__verticalAlign()}};
function CTLText(a,e,b,d,c,f,h,k,m,g,l,n,p,v,u,t,w){this._oContainer=a;this._x=e;this._y=b;this._iWidth=d;this._iHeight=c;this._bMultiline=t;this._iFontSize=f;this._szAlign=h;this._szColor=k;this._szFont=m;this._iPaddingH=l;this._iPaddingV=n;this._bVerticalAlign=u;this._bFitText=v;this._bDebug=w;this._oDebugShape=null;this._fLineHeightFactor=g;this._oText=null;p&&this.__createText(p)}
var CANVAS_WIDTH=768,CANVAS_HEIGHT=1400,EDGEBOARD_X=40,EDGEBOARD_Y=260,FPS=30,FPS_TIME=1E3/FPS,DISABLE_SOUND_MOBILE=!1,SOUNDTRACK_VOLUME_IN_GAME=.2,PRIMARY_FONT="comfortaa",STATE_LOADING=0,STATE_MENU=1,STATE_MENU_MODE=2,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,MODE_EASY=0,MODE_MEDIUM=1,MODE_HARD=2,NUM_COLS,NUM_ROWS,CELL_WIDTH,TIME,ENABLE_FULLSCREEN,ENABLE_CHECK_ORIENTATION,PLAYER_ACCELERATION=5,PLAYER_FRICTION=0,MAX_PLAYER_SPEED=10;
function CPreloader(){var a,e,b,d,c,f,h,k,m;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.addSprite("200x200","./sprites/200x200.jpg");s_oSpriteLibrary.loadSprites();m=new createjs.Container;s_oStage.addChild(m)};this.unload=function(){m.removeAllChildren()};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};
this.attachSprites=function(){var g=new createjs.Shape;g.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);m.addChild(g);g=s_oSpriteLibrary.getSprite("200x200");h=createBitmap(g);h.regX=.5*g.width;h.regY=.5*g.height;h.x=CANVAS_WIDTH/2;h.y=CANVAS_HEIGHT/2-80;m.addChild(h);k=new createjs.Shape;k.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(h.x-100,h.y-100,200,200,10);m.addChild(k);h.mask=k;g=s_oSpriteLibrary.getSprite("progress_bar");d=createBitmap(g);d.x=CANVAS_WIDTH/2-g.width/
2;d.y=CANVAS_HEIGHT/2+70;m.addChild(d);a=g.width;e=g.height;c=new createjs.Shape;c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x,d.y,1,e);m.addChild(c);d.mask=c;b=new createjs.Text("","30px "+PRIMARY_FONT,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+120;b.textBaseline="alphabetic";b.textAlign="center";m.addChild(b);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);m.addChild(f);createjs.Tween.get(f).to({alpha:0},500).call(function(){createjs.Tween.removeTweens(f);
m.removeChild(f)})};this._onButStartRelease=function(){s_oMain._onRemovePreloader()};this.refreshLoader=function(g){b.text=g+"%";100===g&&(s_oMain._onRemovePreloader(),b.visible=!1,d.visible=!1);c.graphics.clear();g=Math.floor(g*a/100);c.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x,d.y,g,e)};this._init()}
function CMain(a){var e,b=0,d=0,c=STATE_LOADING,f,h,k;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_oStage.preventSelection=!1;createjs.Touch.enable(s_oStage,!0);s_bMobile=isMobile();!1===s_bMobile&&s_oStage.enableMouseOver(20);s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.framerate=FPS;navigator.userAgent.match(/Windows Phone/i)&&(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=
new CSpriteLibrary;seekAndDestroy()?f=new CPreloader:window.location.href="https://www.codethislab.com/contact-us.html"};this.preloaderReady=function(){this._loadImages();!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||this._initSounds();e=!0};this.soundLoaded=function(){b++;f.refreshLoader(Math.floor(b/d*100))};this._initSounds=function(){Howler.mute(!s_bAudioActive);s_aSoundsInfo=[];s_aSoundsInfo.push({path:"./sounds/",filename:"game_win",loop:!1,volume:1,ingamename:"game_win"});s_aSoundsInfo.push({path:"./sounds/",
filename:"click",loop:!1,volume:1,ingamename:"click"});s_aSoundsInfo.push({path:"./sounds/",filename:"game_over",loop:!1,volume:1,ingamename:"game_over"});s_aSoundsInfo.push({path:"./sounds/",filename:"moving",loop:!1,volume:1,ingamename:"moving"});s_aSoundsInfo.push({path:"./sounds/",filename:"soundtrack",loop:!0,volume:1,ingamename:"soundtrack"});s_aSoundsInfo.push({path:"./sounds/",filename:"player_collision",loop:!1,volume:1,ingamename:"player_collision"});s_aSoundsInfo.push({path:"./sounds/",
filename:"timer",loop:!1,volume:1,ingamename:"timer"});d+=s_aSoundsInfo.length;s_aSounds=[];for(var g=0;g<s_aSoundsInfo.length;g++)this.tryToLoadSound(s_aSoundsInfo[g],!1)};this.tryToLoadSound=function(g,l){setTimeout(function(){s_aSounds[g.ingamename]=new Howl({src:[g.path+g.filename+".mp3"],autoplay:!1,preload:!0,loop:g.loop,volume:g.volume,onload:s_oMain.soundLoaded,onloaderror:function(n,p){for(var v=0;v<s_aSoundsInfo.length;v++)if(n===s_aSounds[s_aSoundsInfo[v].ingamename]._sounds[0]._id){s_oMain.tryToLoadSound(s_aSoundsInfo[v],
!0);break}},onplayerror:function(n){for(var p=0;p<s_aSoundsInfo.length;p++)if(n===s_aSounds[s_aSoundsInfo[p].ingamename]._sounds[0]._id){s_aSounds[s_aSoundsInfo[p].ingamename].once("unlock",function(){s_aSounds[s_aSoundsInfo[p].ingamename].play();"soundtrack"===s_aSoundsInfo[p].ingamename&&null!==s_oGame&&setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)});break}}})},l?200:0)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);for(var g=0;18>g;g++)s_oSpriteLibrary.addSprite("bg_menu"+
g,"./sprites/bg_menu/bg_menu_"+g+".jpg");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("but_credits","./sprites/but_credits.png");
s_oSpriteLibrary.addSprite("logo_ctl","./sprites/logo_ctl.png");s_oSpriteLibrary.addSprite("but_fullscreen","./sprites/but_fullscreen.png");s_oSpriteLibrary.addSprite("bg_end_panel","./sprites/bg_end_panel.png");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("but_menu_bg","./sprites/but_menu_bg.png");s_oSpriteLibrary.addSprite("but_no","./sprites/but_no.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("but_restart_small",
"./sprites/but_restart_small.png");s_oSpriteLibrary.addSprite("horiz_wall","./sprites/hwall.png");s_oSpriteLibrary.addSprite("vert_wall","./sprites/vwall.png");s_oSpriteLibrary.addSprite("player","./sprites/player.png");s_oSpriteLibrary.addSprite("joypad","./sprites/joypad.png");s_oSpriteLibrary.addSprite("touch_hand","./sprites/touch_hand.png");s_oSpriteLibrary.addSprite("press_hand","./sprites/press_hand.png");s_oSpriteLibrary.addSprite("keyboard","./sprites/keyboard.png");s_oSpriteLibrary.addSprite("logo_menu",
"./sprites/logo_menu.png");d+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;f.refreshLoader(Math.floor(b/d*100))};this._onAllImagesLoaded=function(){};this._onRemovePreloader=function(){try{saveItem("ls_available","ok")}catch(g){s_bStorageAvailable=!1}f.unload();s_oSoundTrack=playSound("soundtrack",1,!0);this.gotoMenu()};this.gotoMenu=function(){h=new CMenu;c=STATE_MENU};this.gotoMenuMode=function(){new CMenuMode;c=STATE_MENU_MODE};this.gotoGame=
function(g){k=new CGame(m,g);c=STATE_GAME;$(s_oMain).trigger("start_session")};this.gotoHelp=function(){new CHelp;c=STATE_HELP};this.stopUpdate=function(){e=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block");!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||Howler.mute(!0)};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();e=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none");(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)&&s_bAudioActive&&Howler.mute(!1)};this._update=
function(g){if(!1!==e){var l=(new Date).getTime();s_iTimeElaps=l-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=l;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);c===STATE_MENU&&h.update();c===STATE_GAME&&k.update();s_oStage.update(g)}};s_oMain=this;var m=a;s_bAudioActive=a.audio_enable_on_startup;NUM_COLS=a.num_cols;NUM_ROWS=a.num_rows;CELL_WIDTH=a.cell_width;TIME=a.time;ENABLE_FULLSCREEN=a.fullscreen;ENABLE_CHECK_ORIENTATION=a.check_orientation;this.initContainer()}
var s_bMobile,s_bAudioActive=!0,s_bFullscreen=!1,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_iLevelReached=1,s_szCurDraw,s_oDrawLayer,s_oStage,s_oMain,s_oSpriteLibrary,s_oSoundTrack=null,s_oCanvas,s_aBestScore=[0,0,0],s_bStorageAvailable=!0,generated=!1,s_aCellList=[],oWallUp=0,oWallRight=1,oWallDown=2,oWallLeft=3,s_aSounds,s_aSoundsInfo;
function CMenu(){var a,e,b,d,c,f,h,k,m,g,l,n,p,v=null,u=null,t=0;this._init=function(){h=[];for(var w=0;18>w;w++){var A=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"+w));A.visible=!1;s_oStage.addChild(A);h.push(A)}h[0].visible=!0;w=s_oSpriteLibrary.getSprite("logo_menu");k=createBitmap(w);k.regX=233.5;k.regY=79.5;k.x=CANVAS_WIDTH/2;k.y=-150;createjs.Tween.get(k,{loop:!1}).to({y:CANVAS_HEIGHT/2-150},1E3,createjs.Ease.cubicOut);s_oStage.addChild(k);w=s_oSpriteLibrary.getSprite("but_play");m=new CGfxButton(CANVAS_WIDTH/
2,CANVAS_HEIGHT+150,w);m.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);createjs.Tween.get(m.getSprite(),{loop:!1}).to({y:CANVAS_HEIGHT/2+150},1E3,createjs.Ease.cubicOut);w=s_oSpriteLibrary.getSprite("but_credits");b=20+w.width/2;d=w.height/2+10;n=new CGfxButton(b,d,w);n.addEventListener(ON_MOUSE_UP,this._onCredits,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)w=s_oSpriteLibrary.getSprite("audio_icon"),c=CANVAS_WIDTH-w.width/4-20,f=w.height/2+10,l=new CToggle(c,f,w,s_bAudioActive,
s_oStage),l.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);w=window.document;A=w.documentElement;v=A.requestFullscreen||A.mozRequestFullScreen||A.webkitRequestFullScreen||A.msRequestFullscreen;u=w.exitFullscreen||w.mozCancelFullScreen||w.webkitExitFullscreen||w.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(v=!1);v&&screenfull.isEnabled&&(w=s_oSpriteLibrary.getSprite("but_fullscreen"),a=b+w.width/2+10,e=d,p=new CToggle(a,e,w,s_bFullscreen,s_oStage),p.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,
this));g=new createjs.Shape;g.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(g);createjs.Tween.get(g).to({alpha:0},1E3).call(function(){s_oStage.removeChild(g)});s_bStorageAvailable?(w=getItem("maze_best_score"),null!==w&&(s_aBestScore=JSON.parse(w))):new CMsgBox(TEXT_ERR_LS,s_oStage);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){m.unload();m=null;n.unload();for(var w=0;w<h.length;w++)s_oStage.removeChild(h[w]);if(!1===DISABLE_SOUND_MOBILE||
!1===s_bMobile)l.unload(),l=null;v&&screenfull.isEnabled&&p.unload();s_oMenu=null};this.refreshButtonPos=function(w,A){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||l.setPosition(c-w,f+A);v&&screenfull.isEnabled&&p.setPosition(a+w,e+A);n.setPosition(b+w,d+A)};this.exitFromCredits=function(){};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onCredits=function(){/*new CCreditsPanel*/};this._onButPlayRelease=function(){this.unload();s_oMain.gotoMenuMode()};this.resetFullscreenBut=
function(){v&&screenfull.isEnabled&&p.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?u.call(window.document):v.call(window.document.documentElement);sizeHandler()};this.update=function(){0===t?(h[h.length-1].visible=!1,h[0].visible=!0):(h[t-1].visible=!1,h[t].visible=!0);t<h.length-1?t++:setTimeout(function(){t=0},1E3)};s_oMenu=this;this._init()}var s_oMenu=null;
function CMenuMode(){var a,e,b,d,c,f,h,k,m,g,l,n=null,p=null,v;this._init=function(){c=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(c);v=new CTLText(s_oStage,CANVAS_WIDTH/2-300,410,600,60,48,"center","#FFFFFF",PRIMARY_FONT,1,2,2,TEXT_SELECT,!0,!0,!0,!1);v.setShadow("#000000",2,2,5);var u=s_oSpriteLibrary.getSprite("but_menu_bg");f=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2-80,u,TEXT_EASY,PRIMARY_FONT,"#007eff",36,s_oStage);f.addEventListenerWithParams(ON_MOUSE_UP,this._onButPlayRelease,
this,MODE_EASY);h=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2+50,u,TEXT_MEDIUM,PRIMARY_FONT,"#007eff",36,s_oStage);h.addEventListenerWithParams(ON_MOUSE_UP,this._onButPlayRelease,this,MODE_MEDIUM);k=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT/2+180,u,TEXT_HARD,PRIMARY_FONT,"#007eff",36,s_oStage);k.addEventListenerWithParams(ON_MOUSE_UP,this._onButPlayRelease,this,MODE_HARD);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)u=s_oSpriteLibrary.getSprite("audio_icon"),b=CANVAS_WIDTH-u.width/4-20,d=u.height/
2+10,g=new CToggle(b,d,u,s_bAudioActive,s_oStage),g.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);u=window.document;var t=u.documentElement;n=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen;p=u.exitFullscreen||u.mozCancelFullScreen||u.webkitExitFullscreen||u.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(n=!1);n&&screenfull.isEnabled&&(u=s_oSpriteLibrary.getSprite("but_fullscreen"),a=20+u.width/4,e=u.height/2+10,l=new CToggle(a,e,u,s_bFullscreen,s_oStage),
l.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));m=new createjs.Shape;m.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(m);createjs.Tween.get(m).to({alpha:0},1E3).call(function(){s_oStage.removeChild(m)});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.unload=function(){f.unload();h.unload();k.unload();k=h=f=null;s_oStage.removeChild(c);c=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)g.unload(),g=null;n&&screenfull.isEnabled&&l.unload();
s_oMenuMode=null};this.refreshButtonPos=function(u,t){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||g.setPosition(b-u,d+t);n&&screenfull.isEnabled&&l.setPosition(a+u,e+t)};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButPlayRelease=function(u){this.unload();s_oMain.gotoGame(u)};this._onFullscreenRelease=function(){s_bFullscreen?(p.call(window.document),s_bFullscreen=!1):(n.call(window.document.documentElement),s_bFullscreen=!0);sizeHandler()};s_oMenuMode=
this;this._init()}var s_oMenuMode=null;
function CGame(a,e){function b(x){if(c)switch(x.preventDefault(),x.keyCode){case 37:g.resetAllDirection();break;case 38:g.resetAllDirection();break;case 39:g.resetAllDirection();break;case 40:g.resetAllDirection()}}function d(x){if(c)switch(x||(x=window.event),x.preventDefault(),x.keyCode){case 37:g.moveLeft();break;case 38:g.moveUp();break;case 39:g.moveRight();break;case 40:g.moveDown()}}var c,f,h,k,m,g,l,n,p,v,u=null,t,w=!0,A,q,H,D;this._init=function(){m=null;f=!1;h=0;setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME);
t=Math.PI/8;l=TIME[e];var x=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(x);v=new createjs.Shape;this._initStroke();this._initGrid();this._initPlayer();k=new CInterface(e);CHelpPanel();p.addChild(v)};this._initGrid=function(){new CMaze(e)};this._initPlayer=function(){g=new CPlayer(s_aCellList[0][0]._getCellX(),s_aCellList[0][0]._getCellY(),e)};this.designStroke=function(){v.graphics.setStrokeStyle(12,"round","round");v.graphics.beginStroke("#ffc500");v.graphics.moveTo(g.x+
5*g.regX,g.y+5*g.regY)};this.drawTrace=function(x,C){v.graphics.moveTo(H,D);v.graphics.lineTo(x,C);H=x;D=C;v.graphics.closePath()};this.getDragStroke=function(){return v};this._initStroke=function(){p=new createjs.Container;s_oStage.addChild(p);n=new createjs.Shape;p.addChild(n)};this.unload=function(){stopSound("timer");k.unload();createjs.Tween.removeAllTweens();s_oStage.removeAllChildren();s_oGame=null};this._checkWin=function(){f&&(h=Math.floor(l/10)*(e+1),h>s_aBestScore[e]&&(s_aBestScore[e]=
h,saveItem("maze_best_score",JSON.stringify(s_aBestScore)),k.refreshBestScore()),k.showWin(),$(s_oMain).trigger("share_event",h),$(s_oMain).trigger("save_score",h))};this.onExit=function(){setVolume("soundtrack",1);s_oGame.unload();s_oMain.gotoMenu();$(s_oMain).trigger("end_session");$(s_oMain).trigger("show_interlevel_ad")};this.restart=function(){this.unload();s_oMain.gotoGame(e);$(s_oMain).trigger("restart_level",1);s_oStage.update();f=!1;h=0;setVolume("soundtrack",SOUNDTRACK_VOLUME_IN_GAME)};
this._onExitHelp=function(){if(s_bMobile){var x=s_oSpriteLibrary.getSprite("joypad");u=new CJoypad(x,100,700,s_oStage,!1)}else document.onkeydown=d,document.onkeyup=b;c=!0};this.checkForExit=function(){c&&g._getPlayerRow()===s_oMaze._returnStartingX()&&g._getPlayerColumn()===s_oMaze._returnStartingY()&&!1===f&&setTimeout(function(){f=!0;stopSound("timer");setVolume("soundtrack",0);playSound("game_win",1,!1);c=!1;s_oGame._checkWin()},5)};this.gameOver=function(){c=!1;null===m&&(playSound("game_over",
1,!1),m=new CEndPanel(s_oSpriteLibrary.getSprite("msg_box")),$(s_oMain).trigger("share_event",0),$(s_oMain).trigger("save_score",0))};this.checkController=function(x){null===x?g.resetAllDirection():x>=-t&&x<t?(g.moveRight(),g.downStop(),g.upStop(),g.leftStop()):x>=t&&x<3*t?(g.moveDown(),g.moveRight(),g.upStop(),g.leftStop()):x>=3*t&&x<5*t?(g.moveDown(),g.upStop(),g.rightStop(),g.leftStop()):x>=5*t&&x<7*t?(g.moveDown(),g.moveLeft(),g.upStop(),g.rightStop()):x>=7*t||x<7*-t?(g.moveLeft(),g.downStop(),
g.rightStop(),g.upStop()):x>=7*-t&&x<5*-t?(g.moveUp(),g.moveLeft(),g.downStop(),g.rightStop()):x>=5*-t&&x<3*-t?(g.moveUp(),g.downStop(),g.rightStop(),g.leftStop()):x>=3*-t&&x<-t&&(g.moveUp(),g.moveRight(),g.downStop(),g.leftStop())};this.updateTimer=function(){0<l&&c&&!this._bDisableEvents&&(l-=s_iTimeElaps,k.refreshTimer(Math.floor(l/1E3)))};this.timesUp=function(){A=new createjs.Text("","70px "+PRIMARY_FONT,"#000000");A.textAlign="center";A.lineWidth=500;A.textBaseline="middle";A.x=CANVAS_WIDTH/
2+2;A.y=CANVAS_HEIGHT/2-2;A.text=TEXT_HURRYUP;s_oStage.addChild(A);q=new createjs.Text("","70px "+PRIMARY_FONT,"#ffffff");q.textAlign="center";q.lineWidth=500;q.textBaseline="middle";q.x=CANVAS_WIDTH/2;q.y=CANVAS_HEIGHT/2;q.text=TEXT_HURRYUP;s_oStage.addChild(q)};this.getScore=function(){return h};this.update=function(){u&&this.checkController(u.update());0<l?(this.updateTimer(),c&&1E4>l&&!0===w&&(playSound("timer",1,!0),this.timesUp(),w=!1)):(h=l=0,stopSound("timer"),this.gameOver());void 0!=A&&
void 0!=q&&(0<A.alpha&&(A.alpha-=.02),0<q.alpha&&(q.alpha-=.02));g.update();this.checkForExit()};s_oGame=this;this._init()}var s_oGame;
function CTextButton(a,e,b,d,c,f,h,k){var m,g,l,n,p,v,u,t,w,A;this._init=function(q,H,D,x,C,L,B){m=!1;g=1;l=[];n=[];A=createBitmap(D);t=new createjs.Container;t.x=q;t.y=H;t.regX=D.width/2;t.regY=D.height/2;s_bMobile||(t.cursor="pointer");t.addChild(A,w);k.addChild(t);w=new CTLText(t,30,10,D.width-60,D.height-20,B,"center",L,C,1,2,2,x,!0,!0,!1,!1);this._initListener()};this.unload=function(){t.off("mousedown",p);t.off("pressup",v);k.removeChild(t)};this.setVisible=function(q){t.visible=q};this.setAlign=
function(q){w.textAlign=q};this.setTextX=function(q){w.x=q};this.setScale=function(q){g=t.scaleX=t.scaleY=q};this.enable=function(){m=!1};this.disable=function(){m=!0};this._initListener=function(){p=t.on("mousedown",this.buttonDown);v=t.on("pressup",this.buttonRelease)};this.addEventListener=function(q,H,D){l[q]=H;n[q]=D};this.addEventListenerWithParams=function(q,H,D,x){l[q]=H;n[q]=D;u=x};this.buttonRelease=function(){m||(playSound("click",1,!1),t.scaleX=g,t.scaleY=g,l[ON_MOUSE_UP]&&l[ON_MOUSE_UP].call(n[ON_MOUSE_UP],
u))};this.buttonDown=function(){m||(t.scaleX=.9*g,t.scaleY=.9*g,l[ON_MOUSE_DOWN]&&l[ON_MOUSE_DOWN].call(n[ON_MOUSE_DOWN]))};this.setPosition=function(q,H){t.x=q;t.y=H};this.tweenPosition=function(q,H,D,x,C,L,B){createjs.Tween.get(t).wait(x).to({x:q,y:H},D,C).call(function(){void 0!==L&&L.call(B)})};this.changeText=function(q){w.refreshText(q)};this.setX=function(q){t.x=q};this.setY=function(q){t.y=q};this.getButtonImage=function(){return t};this.getX=function(){return t.x};this.getY=function(){return t.y};
this.getSprite=function(){return t};this.getScale=function(){return t.scaleX};this._init(a,e,b,d,c,f,h)}
function CToggle(a,e,b,d,c){var f,h,k,m,g;this._init=function(l,n,p,v,u){g=void 0!==u?u:s_oStage;h=[];k=[];u=new createjs.SpriteSheet({images:[p],frames:{width:p.width/2,height:p.height,regX:p.width/2/2,regY:p.height/2},animations:{state_true:[0],state_false:[1]}});f=v;m=createSprite(u,"state_"+f,p.width/2/2,p.height/2,p.width/2,p.height);m.x=l;m.y=n;m.stop();s_bMobile||(m.cursor="pointer");g.addChild(m);this._initListener()};this.unload=function(){m.off("mousedown",this.buttonDown);m.off("pressup",
this.buttonRelease);g.removeChild(m)};this._initListener=function(){m.on("mousedown",this.buttonDown);m.on("pressup",this.buttonRelease)};this.addEventListener=function(l,n,p){h[l]=n;k[l]=p};this.setCursorType=function(l){m.cursor=l};this.setActive=function(l){f=l;m.gotoAndStop("state_"+f)};this.buttonRelease=function(){m.scaleX=1;m.scaleY=1;playSound("click",1,!1);f=!f;m.gotoAndStop("state_"+f);h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(k[ON_MOUSE_UP],f)};this.buttonDown=function(){m.scaleX=.9;m.scaleY=
.9;h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(k[ON_MOUSE_DOWN])};this.setPosition=function(l,n){m.x=l;m.y=n};this._init(a,e,b,d,c)}
function CGfxButton(a,e,b,d){var c,f,h,k,m,g,l,n;this._init=function(v,u,t){c=!1;f=[];h=[];m=[];k=createBitmap(t);k.x=v;k.y=u;g=1;k.regX=t.width/2;k.regY=t.height/2;s_bMobile||(k.cursor="pointer");p.addChild(k);this._initListener()};this.getSprite=function(){return k};this.unload=function(){k.off("mousedown",l);k.off("pressup",n);p.removeChild(k)};this.setVisible=function(v){k.visible=v};this.setCursorType=function(v){k.cursor=v};this._initListener=function(){l=k.on("mousedown",this.buttonDown);n=
k.on("pressup",this.buttonRelease)};this.addEventListener=function(v,u,t){f[v]=u;h[v]=t};this.addEventListenerWithParams=function(v,u,t,w){f[v]=u;h[v]=t;m[v]=w};this.enable=function(){c=!1};this.disable=function(){c=!0};this.buttonRelease=function(){c||(k.scaleX=0<g?1:-1,k.scaleY=1,playSound("click",1,!1),f[ON_MOUSE_UP]&&f[ON_MOUSE_UP].call(h[ON_MOUSE_UP],m[ON_MOUSE_UP]))};this.buttonDown=function(){c||(k.scaleX=0<g?.9:-.9,k.scaleY=.9,f[ON_MOUSE_DOWN]&&f[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN],m[ON_MOUSE_DOWN]))};
this.rotation=function(v){k.rotation=v};this.getButton=function(){return k};this.setPosition=function(v,u){k.x=v;k.y=u};this.setX=function(v){k.x=v};this.setY=function(v){k.y=v};this.getButtonImage=function(){return k};this.setScaleX=function(v){g=k.scaleX=v};this.getX=function(){return k.x};this.getY=function(){return k.y};this.removeAllTweens=function(){createjs.Tween.removeTweens(k)};var p=void 0!==d?d:s_oStage;this._init(a,e,b);return this}
function CMaze(a){var e,b=NUM_COLS[a]-1,d=NUM_ROWS[a]-1,c=oWallLeft,f=oWallRight,h=Array(NUM_COLS[a]),k=CANVAS_WIDTH/2-NUM_COLS[a]/2*CELL_WIDTH[a],m=CANVAS_HEIGHT/2-NUM_ROWS[a]/2*CELL_WIDTH[a];this._init=function(){for(var g=0;g<NUM_ROWS[a];g++){h[g]=Array(NUM_COLS[a]);for(var l=0;l<NUM_COLS[a];l++)h[g][l]=Array(5),h[g][l][oWallUp]=!0,h[g][l][oWallRight]=!0,h[g][l][oWallDown]=!0,h[g][l][oWallLeft]=!0,h[g][l][4]=!1}this.generateMaze(b,d);this.installDoors();this.drawMaze()};this.generateMaze=function(g,
l){h[g][l][4]=!0;var n=this.getNeighbors(g,l);n=this.shuffleNeighbors(n);for(var p=0;p<n.length;p++)0==h[n[p][0]][n[p][1]][4]&&(this.removeWall(g,l,n[p]),this.generateMaze(n[p][0],n[p][1]))};this.installDoors=function(){f==oWallUp&&(h[b][d][oWallUp]=!1);f==oWallRight&&(h[b][d][oWallRight]=!1);f==oWallDown&&(h[b][d][oWallDown]=!1);f==oWallLeft&&(h[b][d][oWallLeft]=!1)};this.getNeighbors=function(g,l){var n=[],p=0;0!=l&&(n[p]=[g,l-1],p++);g<NUM_COLS[a]-1&&(n[p]=[g+1,l],p++);l<NUM_ROWS[a]-1&&(n[p]=[g,
l+1],p++);0!=g&&(n[p]=[g-1,l]);return n};this.shuffleNeighbors=function(g){for(var l=0;l<g.length;l++){var n=Math.floor(Math.random()*g.length),p=Array(2);p[0]=g[l][0];p[1]=g[l][1];g[l][0]=g[n][0];g[l][1]=g[n][1];g[n][0]=p[0];g[n][1]=p[1]}return g};this.removeWall=function(g,l,n){n[1]<l?(h[g][l][oWallUp]=!1,h[n[oWallUp]][n[oWallRight]][oWallDown]=!1):n[1]>l?(h[g][l][oWallDown]=!1,h[n[oWallUp]][n[oWallRight]][oWallUp]=!1):n[0]>g?(h[g][l][oWallRight]=!1,h[n[oWallUp]][n[oWallRight]][oWallLeft]=!1):n[0]<
g&&(h[g][l][oWallLeft]=!1,h[n[oWallUp]][n[oWallRight]][oWallRight]=!1)};this._returnOffsetH=function(){return k};this._returnOffsetV=function(){return m};this._returnStartingX=function(){return b};this._returnStartingY=function(){return d};this._returnEntranceX=function(){return 0};this._returnEntranceY=function(){return 0};this._returnEnter=function(){return c};this._returnExit=function(){return f};this._returnWall=function(g,l,n){return!1===h[g][l][n]?!1:!0};this.drawMaze=function(){e=new createjs.Container;
s_oStage.addChild(e);for(var g=0;g<NUM_ROWS[a];g++){s_aCellList[g]=[];for(var l=0;l<NUM_COLS[a];l++)s_aCellList[g][l]=new CCell(g,l,k+(CELL_WIDTH[a]*g+CELL_WIDTH[a]/2),m+(CELL_WIDTH[a]*l+CELL_WIDTH[a]/2),[h[g][l][oWallUp],h[g][l][oWallRight],h[g][l][oWallDown],h[g][l][oWallLeft]],a,e)}};s_oMaze=this;this._init()}var s_oMaze;
function CInterface(a){var e,b,d,c,f,h,k,m,g,l,n=null,p=null,v,u,t,w;this._init=function(){var A=s_oSpriteLibrary.getSprite("but_exit");t=new createjs.Text(TEXT_TIME+" 0","40px "+PRIMARY_FONT,"#ffffff");t.textAlign="left";t.textBaseline="alphabetic";t.x=40;t.y=1100;s_oStage.addChild(t);w=new createjs.Text(TEXT_BEST_SCORE+" "+s_aBestScore[a],"40px "+PRIMARY_FONT,"#ffffff");w.textAlign="right";w.textBaseline="alphabetic";w.x=CANVAS_WIDTH-40;w.y=1100;s_oStage.addChild(w);d=CANVAS_WIDTH-A.width/2-20;
c=A.height/2+10;v=new CGfxButton(d,c,A,s_oStage);v.addEventListener(ON_MOUSE_UP,this._onExit,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile){var q=s_oSpriteLibrary.getSprite("audio_icon");k=d-A.width/2-q.width/4;m=c;g=new CToggle(k,m,q,s_bAudioActive,s_oStage);g.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);e=20+q.width/4;b=q.height/2+10;f=k-q.width/2;h=m}else e=d-A.width-10,b=c,f=e,h=b;A=window.document;q=A.documentElement;n=q.requestFullscreen||q.mozRequestFullScreen||q.webkitRequestFullScreen||
q.msRequestFullscreen;p=A.exitFullscreen||A.mozCancelFullScreen||A.webkitExitFullscreen||A.msExitFullscreen;!1===ENABLE_FULLSCREEN&&(n=!1);n&&screenfull.isEnabled&&(q=s_oSpriteLibrary.getSprite("but_fullscreen"),l=new CToggle(e,b,q,s_bFullscreen,s_oStage),l.addEventListener(ON_MOUSE_UP,this._onFullscreenRelease,this));u=new CGfxButton(f,h,s_oSpriteLibrary.getSprite("but_restart_small"),s_oStage);u.addEventListener(ON_MOUSE_UP,this._onRestart,this);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=
function(A,q){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||g.setPosition(k-A,m+q);n&&screenfull.isEnabled&&l.setPosition(e+A,b+q);v.setPosition(d-A,c+q);u.setPosition(f-A,h+q)};this.refreshTimer=function(A){0>A&&(A=0);t.text=TEXT_TIME+" "+A};this.refreshBestScore=function(){w.text=TEXT_BEST_SCORE+" "+s_aBestScore[a]};this.unload=function(){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)g.unload(),g=null;n&&screenfull.isEnabled&&l.unload();u.unload();v.unload();s_oInterface=null;s_oGame._bDisableEvents=
!1};this.gameOver=function(A){new CEndPanel(A)};this.showWin=function(){new CWinPanel(a)};this._onExit=function(){new CAreYouSurePanel(s_oStage);s_oGame._bDisableEvents=!0};this._onAudioToggle=function(){Howler.mute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this.resetFullscreenBut=function(){n&&screenfull.isEnabled&&l.setActive(s_bFullscreen)};this._onFullscreenRelease=function(){s_bFullscreen?p.call(window.document):n.call(window.document.documentElement);sizeHandler()};this._onRestart=function(){s_oGame.restart()};
s_oInterface=this;this._init();return this}var s_oInterface=null;
function CCreditsPanel(){var a,e,b,d,c,f,h;this._init=function(){d=new createjs.Shape;d.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);d.alpha=0;s_oStage.addChild(d);(new createjs.Tween.get(d)).to({alpha:.7},500);var k=s_oSpriteLibrary.getSprite("msg_box");h=new createjs.Container;h.y=CANVAS_HEIGHT+k.height/2;s_oStage.addChild(h);a=createBitmap(k);a.regX=k.width/2;a.regY=k.height/2;a.x=CANVAS_WIDTH/2;a.y=CANVAS_HEIGHT/2;h.addChild(a);c=new createjs.Shape;c.graphics.beginFill("#0f0f0f").drawRect(0,
0,CANVAS_WIDTH,CANVAS_HEIGHT);c.alpha=.01;f=c.on("click",this._onLogoButRelease);h.addChild(c);k=s_oSpriteLibrary.getSprite("but_exit");b=new CGfxButton(575,505,k,h);b.addEventListener(ON_MOUSE_UP,this.unload,this);k=470;var m=50,g=CANVAS_WIDTH/2,l=CANVAS_HEIGHT/2-80;new CTLText(h,g-k/2,l-m/2,k,m,44,"center","#FFFFFF",PRIMARY_FONT,1,2,2,TEXT_CREDITS_DEVELOPED,!0,!0,!0,!1);k=s_oSpriteLibrary.getSprite("logo_ctl");e=createBitmap(k);e.regX=k.width/2;e.regY=k.height/2;e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT/
2;h.addChild(e);k=470;m=50;g=CANVAS_WIDTH/2;l=CANVAS_HEIGHT/2+82;new CTLText(h,g-k/2,l-m/2,k,m,38,"center","#FFFFFF",PRIMARY_FONT,1,2,2,"www.codethislab.com",!0,!0,!0,!1);(new createjs.Tween.get(h)).to({y:0},1E3,createjs.Ease.backOut)};this.unload=function(){c.off("click",f);b.unload();b=null;s_oStage.removeChild(d);s_oStage.removeChild(h);s_oMenu.exitFromCredits()};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en","_blank")};this._init()}
function CCell(a,e,b,d,c,f,h){var k,m,g,l,n=CELL_WIDTH[f]/30;this._init=function(p,v,u,t,w,A,q){k=p;m=v;A=f;l=new createjs.Container;l.scaleX=l.scaleY=n+.03;l.x=u;l.y=t;l.regX=15;l.regY=15;q.addChild(l);g=[];p=1.1*n;w[0]&&(g[0]=createBitmap(s_oSpriteLibrary.getSprite("horiz_wall")),l.addChild(g[0]),0===m&&(g[0].scaleY=p));w[1]&&(g[1]=createBitmap(s_oSpriteLibrary.getSprite("vert_wall")),g[1].scaleY+=.07,g[1].x=30,g[1].y=0,l.addChild(g[1]),k===NUM_COLS[A]-1&&(g[1].scaleX=p));w[2]&&(g[2]=createBitmap(s_oSpriteLibrary.getSprite("horiz_wall")),
g[2].y=30,l.addChild(g[2]),m===NUM_ROWS[A]-1&&(g[2].scaleY=p));w[3]&&(g[3]=createBitmap(s_oSpriteLibrary.getSprite("vert_wall")),g[3].scaleY+=.07,l.addChild(g[3]),0===k&&(g[3].scaleX=p))};this._getCellX=function(){return l.x};this._getCellY=function(){return l.y};this._init(a,e,b,d,c,f,h)}
function CPlayer(a,e,b){var d,c=!1,f=!1,h=!1,k=!1,m,g,l=!0,n=!1,p,v;this._init=function(u,t){p=s_oGame.getDragStroke;var w=s_oSpriteLibrary.getSprite("player");d=createBitmap(w);d.name="player";d.regX=12.5;d.regY=12.5;d.x=u;d.y=t;s_oStage.addChild(d);v=new createjs.Shape;v.graphics.beginFill("rgba(255,255,0,0.01)");v.graphics.drawCircle(0,0,50);v.on("mousedown",this.startDrag);v.on("pressmove",this.dragPlayer);v.on("pressup",this.resetAllDirection);s_oStage.addChild(v);s_bMobile||(v.cursor="pointer");
g=m=0};this.startDrag=function(){n=!0;s_oGame.designStroke()};this.dragPlayer=function(u){if(!0===n)if(!0===l){var t=d.x,w=d.y;!0===s_oPlayer.isMovementPossible(u,d.x,d.y)?(d.x=u.stageX/s_iScaleFactor,d.y=u.stageY/s_iScaleFactor,s_oGame.drawTrace(d.x,d.y)):(d.x=t,d.y=w,s_oPlayer.resetAllDirection())}else this.resetAllDirection()};this.isMovementPossible=function(u,t,w){t-=u.stageX/s_iScaleFactor;u=w-u.stageY/s_iScaleFactor;return 7>Math.sqrt(t*t+u*u)?!0:!1};this._getPlayerRow=function(){var u=Math.floor((d.x-
s_oMaze._returnOffsetH())/CELL_WIDTH[b]);return 0>u?0:u>NUM_ROWS[b]-1?NUM_ROWS[b]-1:u};this._getPlayerColumn=function(){var u=Math.floor((d.y-s_oMaze._returnOffsetV())/CELL_WIDTH[b]);return 0>u?0:u>NUM_COLS[b]-1?NUM_COLS[b]-1:u};this._getPlayerX=function(){return d.x};this._getPlayerY=function(){return d.y};this.resetAllDirection=function(){k=h=f=c=n=!1};this.startDragKeyboard=function(){!1===n&&this.startDrag()};this.upStop=function(){h=!1};this.downStop=function(){k=!1};this.leftStop=function(){c=
!1};this.rightStop=function(){f=!1};this.moveLeft=function(){f=!1;c=!0;k=h=!1;this.startDragKeyboard()};this.moveRight=function(){c=!1;f=!0;k=h=!1;this.startDragKeyboard()};this.moveUp=function(){k=!1;h=!0;f=c=!1;this.startDragKeyboard()};this.moveDown=function(){h=!1;k=!0;f=c=!1;this.startDragKeyboard()};this.checkObstacles=function(){var u=this._getPlayerRow(),t=this._getPlayerColumn(),w=s_oMaze._returnWall(u,t,oWallUp),A=s_oMaze._returnWall(u,t,oWallDown),q=s_oMaze._returnWall(u,t,oWallLeft),H=
s_oMaze._returnWall(u,t,oWallRight);0===t?w=!0:0===u?q=!0:t===NUM_COLS[b]-1?A=!0:u===NUM_ROWS[b]-1&&(H=!0);var D=s_oMaze._returnOffsetH()+CELL_WIDTH[b]*u,x=s_oMaze._returnOffsetV()+CELL_WIDTH[b]*t,C,L,B,S;this.checkDistance=function(M){S=q?distanceToLineSegment(D,x,D,x+CELL_WIDTH[b],M.x,M.y):CELL_WIDTH[b];B=H?distanceToLineSegment(D+CELL_WIDTH[b],x,D+CELL_WIDTH[b],x+CELL_WIDTH[b],M.x,M.y):CELL_WIDTH[b];C=w?distanceToLineSegment(D,x,D+CELL_WIDTH[b],x,M.x,M.y):CELL_WIDTH[b];L=A?distanceToLineSegment(D,
x+CELL_WIDTH[b],D+CELL_WIDTH[b],x+CELL_WIDTH[b],M.x,M.y):CELL_WIDTH[b];15>=C?(l=!1,this.upStop(),g+=3):15>=L?(l=!1,this.downStop(),g-=3):15>=B?(l=!1,this.rightStop(),m-=3):15>=S?(l=!1,this.leftStop(),m+=3):l=!0;!0===l?(d.x+=m,d.y+=g,m*=PLAYER_FRICTION,g*=PLAYER_FRICTION,MAX_PLAYER_SPEED=10,m>MAX_PLAYER_SPEED&&(m=MAX_PLAYER_SPEED),m<-MAX_PLAYER_SPEED&&(m=-MAX_PLAYER_SPEED),g>MAX_PLAYER_SPEED&&(g=MAX_PLAYER_SPEED),g<-MAX_PLAYER_SPEED&&(g=-MAX_PLAYER_SPEED),M=[.1,.5,1],Math.abs(m)<M[b]&&(m=0),Math.abs(g)<
M[b]&&(g=0)):(playSound("player_collision",1,!1),s_oPlayer.resetAllDirection(),n=!1)};this.checkDistance(v);void 0!==p&&this.checkDistance(p)};this.update=function(){(c||f||h||k)&&s_oGame.drawTrace(d.x,d.y);c?m-=PLAYER_ACCELERATION:f?m+=PLAYER_ACCELERATION:h?g-=PLAYER_ACCELERATION:k&&(g+=PLAYER_ACCELERATION);v.x=d.x;v.y=d.y;for(var u=0;2>u;u++)this.checkObstacles()};s_oPlayer=this;this._init(a,e)}var s_oPlayer;
function CAreYouSurePanel(){var a,e,b,d,c;this._init=function(){d=new createjs.Shape;d.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);d.alpha=0;d.on("mousedown",function(){});s_oStage.addChild(d);(new createjs.Tween.get(d)).to({alpha:.7},500);c=new createjs.Container;s_oStage.addChild(c);var h=s_oSpriteLibrary.getSprite("msg_box"),k=createBitmap(h);k.regX=h.width/2;k.regY=h.height/2;k.x=CANVAS_WIDTH/2;k.y=CANVAS_HEIGHT/2;c.addChild(k);c.y=CANVAS_HEIGHT+h.height/2;a=c.y;(new createjs.Tween.get(c)).to({y:0},
1E3,createjs.Ease.backOut);new CTLText(c,CANVAS_WIDTH/2-225,CANVAS_HEIGHT/2-100-140,450,280,100,"center","#FFFFFF",PRIMARY_FONT,1,2,2,TEXT_ARE_SURE,!0,!0,!0,!1);e=new CGfxButton(CANVAS_WIDTH/2+170,850,s_oSpriteLibrary.getSprite("but_yes"),c);e.addEventListener(ON_MOUSE_UP,this._onButYes,this);b=new CGfxButton(CANVAS_WIDTH/2-170,850,s_oSpriteLibrary.getSprite("but_no"),c);b.addEventListener(ON_MOUSE_UP,this._onButNo,this)};this._onButYes=function(){b.disable();e.disable();(new createjs.Tween.get(d)).to({alpha:0},
500);(new createjs.Tween.get(c)).to({y:a},400,createjs.Ease.backIn).call(function(){f.unload();s_oGame.onExit()})};this._onButNo=function(){b.disable();e.disable();(new createjs.Tween.get(d)).to({alpha:0},500);(new createjs.Tween.get(c)).to({y:a},400,createjs.Ease.backIn).call(function(){f.unload()})};this.unload=function(){b.unload();e.unload();s_oGame._bDisableEvents=!1;s_oStage.removeChild(d);s_oStage.removeChild(c);d.off("mousedown",function(){})};var f=this;this._init()}
function CHelpPanel(){var a,e,b,d,c,f,h,k,m;this._init=function(){c=new createjs.Container;s_oStage.addChild(c);f=new createjs.Shape;f.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(f);createjs.Tween.get(f).to({alpha:0},1E3).call(function(){f.visible=!1});var g=new createjs.Shape;g.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);g.alpha=.7;c.addChild(g);g=s_oSpriteLibrary.getSprite("msg_box");d=createBitmap(g);d.regX=285;d.regY=287.5;d.x=
CANVAS_WIDTH/2;d.y=CANVAS_HEIGHT/2;c.addChild(d);g=CANVAS_WIDTH/2;var l=CANVAS_HEIGHT/2,n=500,p=80;a=new CTLText(c,g-n/2,l-60-p/2,n,p,32,"center","#FFFFFF",PRIMARY_FONT,1,2,2," ",!0,!0,!0,!1);a.setShadow("#000000",2,2,5);n=500;p=80;e=new CTLText(c,g-n/2,l-p/2,n,p,32,"center","#FFFFFF",PRIMARY_FONT,1,2,2," ",!0,!0,!0,!1);e.setShadow("#000000",2,2,5);n=500;p=80;b=new CTLText(c,g-n/2,l+110-p/2,n,p,32,"center","#FFFFFF",PRIMARY_FONT,1,2,2,TEXT_HELP2,!0,!0,!0,!1);b.setShadow("#000000",2,2,5);!1===s_bMobile?
(n=s_oSpriteLibrary.getSprite("keyboard"),m=createBitmap(n),m.regX=172,m.regY=125,m.x=g,m.y=l-130,m.scaleX=m.scaleY=.5,c.addChild(m),e.refreshText(TEXT_HELP)):(n=s_oSpriteLibrary.getSprite("press_hand"),k=createBitmap(n),k.x=g-220,k.y=l-220,createjs.Tween.get(k,{loop:!0}).to({scaleX:1,scaleY:1},1E3,createjs.Ease.Linear).to({scaleX:.85,scaleY:.85},500,createjs.Ease.Linear),c.addChild(k),n=s_oSpriteLibrary.getSprite("touch_hand"),h=createBitmap(n),h.x=g-150,h.y=l-220,createjs.Tween.get(h,{loop:!0}).to({x:h.x+
310},2500,createjs.Ease.cubicIn).to({x:g-150},1E3,createjs.Ease.cubicIn),c.addChild(h),a.refreshText(TEXT_HELP_MOB1),a.lineWidth=440,a.textAlign="center",a.setX(g),e.refreshText(TEXT_HELP_MOB2),e.lineWidth=440,e.textAlign="center",e.setX(g),e.setY(l+30),b.setY(l+130));var v=this;c.on("pressup",function(){v._onExitHelp()});s_oGame._bDisableEvents=!0};this.unload=function(){s_oStage.removeChild(c);s_oGame._bDisableEvents=!1;var g=this;c.off("pressup",function(){g._onExitHelp()})};this._onExitHelp=function(){this.unload();
s_oGame._onExitHelp()};this._init()}
function CEndPanel(){var a,e,b,d;this._init=function(){d=new createjs.Container;s_oStage.addChild(d);a=createBitmap(s_oSpriteLibrary.getSprite("bg_end_panel"));d.addChild(a);var f=500,h=60,k=CANVAS_WIDTH/2,m=CANVAS_HEIGHT/2-60;new CTLText(d,k-f/2,m-h/2,f,h,54,"center","#FFFFFF",PRIMARY_FONT,1,2,2,TEXT_GAMEOVER,!0,!0,!0,!1);f=500;h=60;k=CANVAS_WIDTH/2;m=CANVAS_HEIGHT/2+40;new CTLText(d,k-f/2,m-h/2,f,h,54,"center","#FFFFFF",PRIMARY_FONT,1,2,2,TEXT_END_PANEL+": 0",!0,!0,!0,!1);e=new CGfxButton(CANVAS_WIDTH/
2-170,850,s_oSpriteLibrary.getSprite("but_home"),d);e.addEventListener(ON_MOUSE_UP,this._onExit,this);b=new CGfxButton(CANVAS_WIDTH/2+170,850,s_oSpriteLibrary.getSprite("but_restart"),d);b.addEventListener(ON_MOUSE_UP,this._onRestart,this);d.alpha=0;(new createjs.Tween.get(d)).to({alpha:1},500).call(function(){$(s_oMain).trigger("show_interlevel_ad")});console.log("iScore  0")};this.unload=function(){e.unload();e=null;b.unload();b=null;s_oStage.removeChild(d)};this._onExit=function(){c.unload();s_oMain.gotoMenu()};
this._onRestart=function(){c.unload();s_oGame.restart()};var c=this;this._init()}
function CWinPanel(a){var e,b,d,c;this._init=function(h){c=new createjs.Container;s_oStage.addChild(c);e=createBitmap(s_oSpriteLibrary.getSprite("bg_end_panel"));c.addChild(e);h=s_oGame.getScore();var k=500,m=120,g=CANVAS_WIDTH/2,l=CANVAS_HEIGHT/2-150;new CTLText(c,g-k/2,l-m/2,k,m,48,"center","#FFFFFF",PRIMARY_FONT,1,2,2,sprintf(TEXT_CONGRATS,h),!0,!0,!0,!1);k=500;m=120;g=CANVAS_WIDTH/2;l=CANVAS_HEIGHT/2;new CTLText(c,g-k/2,l-m/2,k,m,48,"center","#FFFFFF",PRIMARY_FONT,1,2,2,sprintf(TEXT_YOUR_BEST_SCORE,
s_aBestScore[a]),!0,!0,!0,!1);b=new CGfxButton(CANVAS_WIDTH/2-170,850,s_oSpriteLibrary.getSprite("but_home"),c);b.addEventListener(ON_MOUSE_UP,this._onExit,this);d=new CGfxButton(CANVAS_WIDTH/2+170,850,s_oSpriteLibrary.getSprite("but_restart"),c);d.addEventListener(ON_MOUSE_UP,this._onRestart,this);c.alpha=0;(new createjs.Tween.get(c)).to({alpha:1},300).call(function(){$(s_oMain).trigger("show_interlevel_ad")});setVolume("soundtrack",.4)};this.unload=function(){b.unload();b=null;d.unload();d=null;
s_oStage.removeChild(c)};this._onExit=function(){f.unload();s_oMain.gotoMenu()};this._onRestart=function(){f.unload();s_oGame.restart()};var f=this;this._init()}
function CMsgBox(a,e){var b,d;this._init=function(h){d=new createjs.Container;f.addChild(d);h=new createjs.Shape;h.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);h.alpha=.5;h.on("click",function(){});d.addChild(h);h=s_oSpriteLibrary.getSprite("msg_box");var k=createBitmap(h);k.x=.5*CANVAS_WIDTH;k.y=.5*CANVAS_HEIGHT;k.regX=.5*h.width;k.regY=.5*h.height;d.addChild(k);new CTLText(d,CANVAS_WIDTH/2-225,CANVAS_HEIGHT/2-80-150,450,300,26,"center","#FFFFFF",PRIMARY_FONT,1,2,2,TEXT_ERR_LS,
!0,!0,!0,!1);b=new CGfxButton(CANVAS_WIDTH/2,840,s_oSpriteLibrary.getSprite("but_yes"),d);b.addEventListener(ON_MOUSE_UP,this._onButOk,this)};this._onButOk=function(){c.unload()};this.unload=function(){b.unload();f.removeChild(d)};var c=this;var f=e;this._init(a)}
function CJoypad(a,e,b,d,c){var f,h,k,m,g,l;this._init=function(n,p,v,u,t){f=n.height/2;k=h=0;m=n.height/30;l=new createjs.Container;l.x=p;l.y=v;u.addChild(l);p=new createjs.SpriteSheet({images:[n],frames:{width:n.width/2,height:n.height,regX:n.width/2/2,regY:n.height/2},animations:{bg:[0],stick:[1]}});v=createSprite(p,"bg",n.width/2/2,n.height/2,n.width/2,n.height);g=createSprite(p,"stick",n.width/2/2,n.height/2,n.width/2,n.height);l.addChild(v,g);t||(l.visible=!1);u.on("mousedown",this.onPressStart);
u.on("pressmove",this.onPressMove);u.on("pressup",this.onPressRelease)};this.addFireButtonListener=function(n,p,v){};this.unload=function(){d.off("mousedown",this.onStageStart);d.off("pressmove",this.onStageMove);d.off("pressup",this.onStageRelease);d.removeChild(l)};this.onPressStart=function(n){n.primary&&!c&&(l.visible=!0,l.x=n.stageX,l.y=n.stageY,g.x=0,g.y=0)};this.onPressMove=function(n){n.primary&&l.visible&&(g.x=n.stageX-l.x,g.y=n.stageY-l.y,k=Math.atan2(g.y,g.x),h=Math.abs(g.x/Math.cos(k)),
Math.pow(g.x,2)+Math.pow(g.y,2)>Math.pow(f,2)&&(g.x=f*Math.cos(k),g.y=f*Math.sin(k)))};this.onPressRelease=function(n){n.primary&&(c?(new createjs.Tween(g)).to({x:0,y:0},200).call(function(){k=h=0}):(l.visible=!1,k=h=0))};this.update=function(){return h>m?k:null};this._init(a,e,b,d,c)}function extractHostname(a){a=-1<a.indexOf("://")?a.split("/")[2]:a.split("/")[0];a=a.split(":")[0];return a=a.split("?")[0]}
function extractRootDomain(a){a=extractHostname(a);var e=a.split("."),b=e.length;2<b&&(a=e[b-2]+"."+e[b-1]);return a}
var getClosestTop=function(){var a=window,e=!1;try{for(;a.parent.document!==a.document;)if(a.parent.document)a=a.parent;else{e=!0;break}}catch(b){e=!0}return{topFrame:a,err:e}},getBestPageUrl=function(a){var e=a.topFrame,b="";if(a.err)try{try{b=window.top.location.href}catch(c){var d=window.location.ancestorOrigins;b=d[d.length-1]}}catch(c){b=e.document.referrer}else b=e.location.href;return b},TOPFRAMEOBJ=getClosestTop(),PAGE_URL=getBestPageUrl(TOPFRAMEOBJ);
function seekAndDestroy(){for(var a=extractRootDomain(PAGE_URL),e=[String.fromCharCode(99,111,100,101,116,104,105,115,108,97,98,46,99,111,109),String.fromCharCode(101,110,118,97,116,111,46,99,111,109),String.fromCharCode(99,111,100,101,99,97,110,121,111,110,46,99,111,109),String.fromCharCode(99,111,100,101,99,97,110,121,111,110,46,110,101,116)],b=0;b<e.length;b++)if(e[b]===a)return!0;return!0};